
% JOD appendicies
\appendix

   %\section{Appendixes}
    \newpage
    \section{JOD Distribution}
   
   
   JOD is distributed\index{installation!distribution} as a \emph{J addon}.  
   You can install JOD using \texttt{JAL} the  
   \href{http://www.jsoftware.com/jwiki/JAL/Package_Manager?highlight=%28JAL%29}{\emph{J package manager}} \cite{jwiki:jal}.
   
   
   The JOD distribution is broken into two packages:
   \begin{enumerate}
	\item  \href{http://www.jsoftware.com/jwiki/Addons/general/jod}{\texttt{jod}} 
	\cite{baker:jod}:  This is the only package that must be installed to run JOD.  
	It contains  JOD system code and supporting files.
	\item  \href{http://www.jsoftware.com/jwiki/Addons/general/jodsource}{\texttt{jodsource}}
	 \cite{baker:jodsource}: This addon is single \texttt{zip} file containing 
	   JOD dictionary dumps.  JOD dictionary dumps\index{dictionary!source!\texttt{jodsource}}
	  are J script files that can rebuild  JOD dictionaries.  Dump files are the best way to
	  distribute dictionary code since they are independent of J binary representations. 
	  The \texttt{jodsource}\index{source code} addon contains.
  \begin{enumerate}
	  \item \texttt{joddev.ijs} --- development put dictionary\index{put dictionary}
	  \item \texttt{jod.ijs} --- main JOD source and test script dictionary
	  \item \texttt{utils.ijs}  --- common utilities dictionary
     \item \texttt{jodsourcesetup.ijs} --- J script that creates and loads the three
     JOD development dictionaries. 
  \end{enumerate}
\end{enumerate}
 
   \newpage
   \section{JOD Classes}\label{ap:classes}
   
   \begin{figure}[htbp]
  \centering
  \includegraphics[width=0.85\textwidth]{joddot}
  \caption[JOD Classes]{This diagram\index{z interface} shows how 
    JOD classes\index{classes} are related. JOD classes are loaded into 
    J addon \textbf{\texttt{a}} locales. The arrows\index{locale!classes} indicate how J names are resolved. \emph{Diagram Generated by} \texttt{Graphviz} \cite{jwiki:graphviz}.    
    }
   \label{eps:joddot}
   \end{figure}
   
   \newpage
   \section{Reference Path}\label{ap:refpath}
   
   JOD groups and suites, (see \hyperlink{il:grp}{\texttt{grp}} on page~\pageref{ss:grp}), are defined with respect to a particular path.  This path is called the \emph{reference path}.  The reference path\index{reference path} is stored when the first put dictionary group or 
suite is defined.   Group and suite generation with \hyperlink{il:make}{\texttt{make}}, \hyperlink{il:mls}{\texttt{mls}} and  \hyperlink{il:lg}{\texttt{lg}}, (see pages~\pageref{ss:make}, \pageref{ss:mls}, \pageref{ss:lg}), check the current path against the reference path.  If the paths do not match an error is returned.

Reference paths display current dictionary names but the path is 
stored as a unique list of extended dictionary 
identification numbers: \texttt{DIDNUM}s.  On Windows and Linux 
systems the \texttt{DIDNUM}\index{DIDNUM} is based 
on \texttt{GUID}s.  \texttt{DIDNUM}s insure reference paths are unique.


A reference path can only be reset by clearing the put dictionary\index{put dictionary}
 path, opening desired dictionaries and recreating a group or suite: see \hyperlink{il:dpset}{\texttt{dpset}} on page~\pageref{ss:dpset}.

\begin{lstlisting}[frame=single,framerule=0pt,basicstyle=\ttfamily\footnotesize]
    NB. open first five dictionaries 
    od 5 {. }. od ''
+-+--------------------------+------+---+-----+--------+---+
|1|opened (rw/rw/ro/rw/rw) ->|budget|cbh|flick|flickdev|gps|
+-+--------------------------+------+---+-----+--------+---+

    NB. display dictionary information - reference paths in last column
    did ~ 0
+-+----------------------------------------------------------------------+
|1|+--------+--+-----+-----+-------+-------+------+---------------------+|
| ||        |--|Words|Tests|Groups*|Suites*|Macros|*Path                ||
| |+--------+--+-----+-----+-------+-------+------+---------------------+|
| ||budget  |rw|14   |0    |2      |0      |0     |/budget              ||
| |+--------+--+-----+-----+-------+-------+------+---------------------+|
| ||cbh     |rw|145  |0    |6      |0      |6     |/cbh/utils           ||
| |+--------+--+-----+-----+-------+-------+------+---------------------+|
| ||flick   |ro|296  |3    |9      |0      |9     |/flick/utils         ||
| |+--------+--+-----+-----+-------+-------+------+---------------------+|
| ||flickdev|rw|96   |2    |2      |0      |2     |/flickdev/flick/utils||
| |+--------+--+-----+-----+-------+-------+------+---------------------+|
| ||gps     |rw|11   |0    |0      |0      |0     |/gps/utils           ||
| |+--------+--+-----+-----+-------+-------+------+---------------------+|
+-+----------------------------------------------------------------------+
\end{lstlisting}
   
   \newpage
   \section{JOD Argument Codes}

The left, and some right, arguments of JOD verbs are specified with \emph{object}, \emph{qualifier} and \emph{option} codes. Object codes\index{codes!argument} are typically the first argument code while options and qualifiers usually occupy the second and third positions. Options and qualifiers are sometimes negative. Negative values modify codes: see tables~\ref{tab:objcodes}, \ref{tab:qualcodes} and
\ref{tab:objneg} on 
pages~\pageref{tab:objcodes}, \pageref{tab:qualcodes} and \pageref{tab:objneg}.

\begin{table}[htbp]
  \centering
   \scriptsize
   \begin{tabular}{|l|l|l|p{4.0in}|} \hline
   \multicolumn{4}{|c|}{\textbf{\normalsize Object Codes\T\B}} \\ \hline
   \multicolumn{1}{|c|}{\textbf{\normalsize Noun\T}} & 
   \multicolumn{1}{|c|}{\textbf{\normalsize Code}} & 
   \multicolumn{1}{|c|}{\textbf{\normalsize Use}} & 
   \multicolumn{1}{|c|}{\textbf{\normalsize Example\B}} \\ \hline
   \texttt{WORD\T\B} & 0 & word code & \begin{minipage}{3.9in}
\begin{tabular}{l}
\verb|0 dnl ''  | \textcolor{CodeComment}{\ttfamily\textsl{NB. list all words on path}} \\
\end{tabular} 
\end{minipage} \\ \hline
 \texttt{TEST\T\B} & 1 & test case code & \begin{minipage}{3.9in}
\begin{tabular}{l}
\verb|1 put 'test';'test code..'  | \textcolor{CodeComment}{\ttfamily\textsl{NB. store test}} \\
\end{tabular} 
\end{minipage} \\ \hline
 \texttt{GROUP\T\B} & 2 & group code & \begin{minipage}{3.9in}
\begin{tabular}{l}
\verb|2 put 'name';'group header ...'  | \textcolor{CodeComment}{\ttfamily\textsl{NB. store group header}} \\
\end{tabular} 
\end{minipage} \\ \hline
 \texttt{SUITE\T\B} & 3 & suite code & \begin{minipage}{3.9in}
\begin{tabular}{l}
\verb|3 grp 'suite'  | \textcolor{CodeComment}{\ttfamily\textsl{NB. get suite members, list of test names}} \\
\end{tabular} 
\end{minipage} \\ \hline
 \texttt{MACRO\T\B} & 4 & macro code & \begin{minipage}{3.9in}
\begin{tabular}{l}
\verb|4 disp 'test'  | \textcolor{CodeComment}{\ttfamily\textsl{NB. display macro}} \\
\end{tabular} 
\end{minipage} \\ \hline
    \end{tabular}
   \caption{JOD Object Codes}
  \label{tab:objcodes}
\end{table}

\begin{table}[htbp]
  \centering
   \scriptsize
   \begin{tabular}{|l|l|l|p{4.0in}|} \hline
   \multicolumn{4}{|c|}{\textbf{\normalsize Qualifier Codes\T\B}} \\ \hline
   \multicolumn{1}{|c|}{\textbf{\normalsize Noun\T}} & 
   \multicolumn{1}{|c|}{\textbf{\normalsize Code}} & 
   \multicolumn{1}{|c|}{\textbf{\normalsize Use}} & 
   \multicolumn{1}{|c|}{\textbf{\normalsize Example\B}} \\ \hline
   \texttt{DEFAULT\T\B} & 7 & default action & \begin{minipage}{3.9in}
\begin{tabular}{l}
\verb|0 7 get 'this'  | \textcolor{CodeComment}{\ttfamily\textsl{NB. default behaviour}} \\
\end{tabular} 
\end{minipage} \\ \hline
 \texttt{EXPLAIN\T\B} & 8 & short explanation text & \begin{minipage}{3.9in}
\begin{tabular}{l}
\verb|0 8 put 'name';'explain name'  |  \\
\end{tabular} 
\end{minipage} \\ \hline
 \texttt{DOCUMENT\T\B} & 9 & documentation text & \begin{minipage}{3.9in}
\begin{tabular}{l}
\verb|2 9 put 'group';'very long group document ...'  |  \\
\end{tabular} 
\end{minipage} \\ \hline
 \texttt{NVTABLE\T\B} & 10 & name value table & \begin{minipage}{3.9in}
\begin{tabular}{l}
\verb|0 10 get }. dnl ''  | \textcolor{CodeComment}{\ttfamily\textsl{NB. return all words in table}} \\
\end{tabular} 
\end{minipage} \\ \hline
 \texttt{REFERENCE\T\B} & 11 & reference code & \begin{minipage}{3.9in}
\begin{tabular}{l}
\verb|11 del 'earthdist'  | \textcolor{CodeComment}{\ttfamily\textsl{NB. delete word references}} \\
\end{tabular} 
\end{minipage} \\ \hline
 \texttt{JSCRIPT\T\B} & 21 &  J script code\index{postprocessor} & \begin{minipage}{3.9in}
\begin{tabular}{l}
\verb|4 1 21 dnl 'POST_'  | \textcolor{CodeComment}{\ttfamily\textsl{NB. list postprocessors}} \\
\end{tabular} 
\end{minipage} \\ \hline
\texttt{LATEX\T\B} & 22 & \LaTeXe text code  & \begin{minipage}{3.9in}
\begin{tabular}{l}
\verb|4 get }. 4 3 22 dnl 'TEX'  | \textcolor{CodeComment}{\ttfamily\textsl{NB. get LaTeX macros}} \\
\end{tabular} 
\end{minipage} \\ \hline
\texttt{HTML\T\B} & 23 & HTML text code & \begin{minipage}{3.9in}
\begin{tabular}{l}
\verb|4 put 'htmltxt';23;'<a>hello world</a>'  | \textcolor{CodeComment}{\ttfamily\textsl{NB. store html}} \\
\end{tabular} 
\end{minipage} \\ \hline
\texttt{XML\T\B} & 24 & XML text code & \begin{minipage}{3.9in}
\begin{tabular}{l}
\verb|4 put 'xmltxt';24;'<p>baby step xml</p>'  |  \textcolor{CodeComment}{\ttfamily\textsl{NB. store xml}}\\
\end{tabular} 
\end{minipage} \\ \hline
\texttt{TEXT\T\B} & 25 & ASCII text code & \begin{minipage}{3.9in}
\begin{tabular}{l}
\verb|4 3 25 dnl 'EPS'  | \textcolor{CodeComment}{\ttfamily\textsl{NB. texts ending with EPS}} \\
\end{tabular} 
\end{minipage} \\ \hline
\texttt{BYTE\T\B} & 26 & BYTE characters & \begin{minipage}{3.9in}
\begin{tabular}{l}
\verb|4 put 'BYTEME';a.|  \\
\end{tabular} 
\end{minipage} \\ \hline
\texttt{UTF8\T\B} & 28 & Unicode UTF8 text & \begin{minipage}{3.9in}
\begin{tabular}{l}
\verb|4 put 'UTF8TEXT';UTF8_ajod_;(8 u: 4 u: 56788 4578,65+i.5)  |  \\
\end{tabular} 
\end{minipage} \\ \hline
    \end{tabular}
   \caption{JOD Qualifier Codes}
  \label{tab:qualcodes}
\end{table}

\newpage

The meaning of negative option and qualifier codes depends on the word.  For 
\hyperlink{il:dnl}{\texttt{dnl}} a negative option requests a \emph{path order list.}\index{path order list}

\begin{table}[htbp]
  \centering
   \scriptsize
\begin{tabular}{|l|l|p{4.7in}|} \hline
   \multicolumn{3}{|c|}{\textbf{\normalsize Negative Codes\T\B}} \\ \hline
   \multicolumn{1}{|c|}{\textbf{\normalsize Code\T}} & 
   \multicolumn{1}{|c|}{\textbf{\normalsize Use}} & 
   \multicolumn{1}{|c|}{\textbf{\normalsize Example\B}} \\ \hline
   \verb|_1|\T\B & path order list & \begin{minipage}{3.9in}
\begin{tabular}{l}
\verb|0 _1 dnl ''  | \textcolor{CodeComment}{\ttfamily\textsl{NB. path order list of words}} \\
\end{tabular} 
\end{minipage} \\ \hline
\verb|_2|\T\B & path order list & \begin{minipage}{3.9in}
\begin{tabular}{l}
\verb|1 _2 dnl 'boo'  | \textcolor{CodeComment}{\ttfamily\textsl{NB. path order list of test names containing boo}} \\
\end{tabular} 
\end{minipage} \\ \hline
\end{tabular}
   \caption{JOD Negative Codes}
   \label{tab:objneg}
\end{table}
 
   \newpage
   \section{\texttt{jodparms.ijs}}\label{ap:jodparms}
   
\verb|jodparms.ijs| is read when the master file \verb|jmaster.ijf| is created
and is used to set dictionary parameters.

Dictionary parameters are distributed to dictionary files and runtime
objects. New parameters can be added by editing \verb|jodparms.ijs|
and recreating the master file.
The last few lines of the following example show how to add
\texttt{COPYRIGHT} and \texttt{MYPARAMETER}. 

When a parameter is added its value will appear in the directory
objects of all dictionaries but will only be \hyperlink{il:dpset}{\texttt{dpset}}'able in new dictionaries.

\begin{quotation}
	To change default master dictionary parameters:
	\begin{enumerate}
	  \item Exit J
		\item Delete the files
	  \begin{description}
		  \item \verb|~addons/general/jod/jmaster.ijf|
		  \item \verb|~addons/general/jod/jod.ijn|
  	\end{description}
		\item Edit 
  	\begin{description}
	 	  \item \verb|~addons/general/jod/jodparms.ijs|
  	\end{description}
		\item Restart J and reload JOD with 
		\begin{description}
	   	\item \verb|load 'general/jod'|
		\end{description}
	 \end{enumerate}
\end{quotation}

%\vspace{0.5cm}	

\begin{lstlisting}[frame=single,framerule=0pt,basicstyle=\ttfamily\footnotesize]
NB.*jodparms s-- default dictionary parameters.
NB.
NB. This file is used to set  the  default  dictionary parameters
NB. table  in the master file. When  a  new dictionary is created
NB. the  parameters  in the  master file are used to specify  the
NB. parameters for a particular dictionary. The  verb (dpset) can
NB. be   used  to   modify  parameter  settings   in   individual
NB. dictionaries.  Master  file parameters can only be changed by
NB. editing this file and recreating the master file.
NB.
NB. WARNING: all the  parameters currently listed are required by
NB. the JOD system. If you remove any of them JOD will crash. You
NB. can  safely add additional parameters but  you  cannot safely
NB. remove current parameters.

MASTERPARMS =: 0 : 0

NB. The format of this parameter file is:
NB.     jname ; (type) description ; value
NB. 
NB.     jname is a valid J name
NB.     (type) description documents the parameter - type is required
NB.        only (+integer) is currently executed other types will
NB.        be passed as character lists (see dptable).
NB.     value is an executable J expression that produces a value
  
PUTFACTOR  ; (+integer) words stored in one loop pass  (10<y<2048)      ; 100
GETFACTOR  ; (+integer) words retrieved in one loop pass (10<y<2048)    ; 250
COPYFACTOR ; (+integer) components copied in one loop pass  (1<y<240)   ; 100
DUMPFACTOR ; (+integer) objects dumped in one loop pass (1<y<240)       ; 50
DOCUMENTWIDTH ; (+integer) width of justified document text  (20<y<255) ; 61
ASCII85    ; (+integer) when 1 ascii85 used in dumps - default 0        ; 0

NB. Any added parameters are stored in the master file when
NB. created and distributed to JOD directory objects.  

NB. WARNING: when defining J expressions be careful about the ; character 
NB. the JOD code (dptable) that parses this string is rudimentary.
NB. VISITOR ; (character) executed by directory object visitor ; dropdir 0

NB. COPYRIGHT ; (character) ; All rights reserved
NB. MYPARAMETER ; (+integer) the answer ; 42
)
\end{lstlisting}


   \newpage
   \section{\texttt{jodprofile.ijs}}\label{ap:jodprofile}
   
\verb|jodprofile.ijs| is an optional user profile script; it runs after
JOD loads and can be used to customize\index{configuration!\texttt{jodprofile.ijs}} your working environment.  The following is an example
profile script. 

%\lstset{numbers=left, numberstyle=\tiny, stepnumber=2, numbersep=5pt}

\begin{lstlisting}[frame=single,framerule=0pt,basicstyle=\ttfamily\footnotesize]
NB.*jodprofile s-- JOD dictionary profile.
NB.
NB. An example JOD profile script. Save this script in
NB.
NB. ~addons/general/jod
NB.
NB. with the name jodprofile.ijs
NB.
NB. This script  is  executed  AFTER all dictionary  objects have
NB. been created. It  can  be used  to  set up  your default  JOD
NB. working environment.
NB.
NB. WARNING: Do not dpset 'RESETME' if more than one  JOD task is
NB. active. If only one task is active RESETME's prevent annoying
NB. already open  messages that frequently result from forgetting
NB. to close dictionaries upon exiting J.

NB. set white space preservation on
9!:41 [ 1

NB. do not reset if you are running more than one JOD instance
dpset 'RESETME'

NB. project shortcuts - use explicit 
NB. defintions so it's easy to reset the group/suite
ag_ijod_=: 3 : 'jodg addgrp y'
dg_ijod_=: 3 : 'jodg delgrp y'
   
NB. referenced group words not in group
nx_ijod_=: 3 : '(allrefs  }. gn) -. gn=. grp jodg'
   
NB. short help for group words
hg_ijod_=: [: hlpnl [: }. grp

NB. regenerate put dictionary word cross references
reref_ijod_=: 3 : '(n,.s) #~ -.;0{"1 s=.0 globs&>n=.}.revo'''' [ y'

NB. open working dictionaries and run project macros
NB. set up current project (1 suppress IO, 0 or elided display)
NB. 1 rm 'prjThumbutilsSetup' [ smoutput od ;: 'imagedev image utils'
NB. 1 rm 'prjjod' [ smoutput od ;:'joddev jod utils'
\end{lstlisting}

   \newpage
   \section{\texttt{joduserconfigbak.ijs}}\label{ap:jodusercfgbak}
   
\verb|joduserconfigbak.ijs| is an optional configuration\index{configuration!\texttt{joduserconfigbak.ijs}} 
script. \verb|joduserconfigbak.ijs| is in the directory.
\begin{verbatim}
  ~addons/general/jod/jodbak
\end{verbatim}
\verb|joduserconfigbak.ijs| can be used to redefine class words before
any JOD objects are created. 
   
\begin{lstlisting}[frame=single,framerule=0pt,basicstyle=\ttfamily\footnotesize]  
NB.*joduserconfigbak s-- example JOD user configuration script.
NB.
NB. This  script is  executed BEFORE JOD objects  are created. It
NB. can be used to redefine and customize various class nouns. To
NB. make  this script  active  rename it to joduserconfig.ijs and
NB. copy it, with your edits, to the main jod directory:
NB.
NB. ~addons/general/jod
NB.
NB. The nouns listed below are good candidates for redefinition.

NB. smoutput 'joduserconfig.ijs executing ...'

NB. PDF reader in jodutil class
NB. Reset for new versions or other PDF readers
NB. PDFREADER_ajodutil_=:'C:\Program Files\Adobe\Reader 8.0\Reader\acrord32.exe'

NB. alternative Ghostscript compatible reader
PDFREADER_ajodutil_=:'C:\Program Files\Ghostgum\gsview\gsview32.exe'

NB. Preferred web browser in jodutil class
WWW0_ajodutil_=:'c:\Program Files\Mozilla Firefox\firefox.exe'

NB. Secondary web browser in jodutil class
WWW1_ajodutil_=:'C:\Program Files\Internet Explorer\IEXPLORE.EXE'

NB. Note: PDF reader and web browser values set with J's 
NB. configuration utility take precedence over these nouns. 
\end{lstlisting}

   
   \newpage
   \section{JOD \texttt{startup.ijs} entries}\label{ap:startup}
   
\verb|startup.ijs| is J's optional user startup\index{configuration!\texttt{startup.ijs}} 
script. \verb|startup.ijs| is in the directory.
\begin{verbatim}
  ~config   
\end{verbatim}
JOD uses \verb|startup.ijs|
to store load scripts generated by \hyperlink{il:mls}{\texttt{mls}}: see page~\pageref{ss:mls}.
   
\begin{lstlisting}[frame=single,framerule=0pt,basicstyle=\ttfamily\footnotesize]   
NB. WARNING: JOD managed section do not edit!
NB.<JOD_Load_Scripts>
buildpublic_j_ 0 : 0
bstats  c:/jod/j701/utils/script/bstats
xmlutils  c:/jod/j701/utils/script/xmlutils
analystgraphs  c:/jod/j701/franklin/script/analystgraphs
exif  c:/jod/j701/smugdev/script/exif
jodtester  c:/jod/j701/joddev/script/jodtester
waypoints  c:/jod/j701/gps/script/waypoints
Weeks  c:/jod/j701/docs/script/Weeks
MweccTeXPreprocess  c:/jod/j701/docs/script/MweccTeXPreprocess
DudTeXPreprocess  c:/jod/j701/docs/script/DudTeXPreprocess
BiblioHelper  c:/jod/j701/docs/script/BiblioHelper
RecodeSchedZ  c:/jod/j701/mwecc/script/RecodeSchedZ
)
NB.</JOD_Load_Scripts>
\end{lstlisting}

\newpage
\input{jodvcsys}
  
\newpage
\input{jodhung}

\newpage
\section{JOD-nemomics}

%\centering
\Large
\itshape
  
%``\textbf{M}nemonics \textbf{N}eatly \textbf{E}liminate \textbf{M}an's \textbf{O}nly \textbf{N}emesis - \textbf{I}nsufficient \textbf{C}erebral \textbf{S}torage''
\begin{center}

	\hyperlink{il:jodhelp}{jodhelp} us!
	
	I \hyperlink{il:get}{get} it!
	
	\hyperlink{il:put}{put} it where the sun don't shine.
	
	\hyperlink{il:make}{make} my day.
	
	We're living in a golden \hyperlink{il:jodage}{jodage}.
	
	\hyperlink{il:did}{did}dle me this!
	
	\hyperlink{il:grp}{grp}'ing in the dark.
	
	Am I going to live \hyperlink{il:doc}{doc}?
	
	It was \hyperlink{il:revo}{revo}lting.
	
	He \hyperlink{il:od}{od}'ed man.
	
	\hyperlink{il:et}{et} phone home.
	
	It's a brand \hyperlink{il:newd}{newd}.
	
	He put on a fine \hyperlink{il:disp}{disp}lay.
	
	Dick \hyperlink{il:uses}{uses} Jane.
	
	I feel well \hyperlink{il:restd}{restd}.
	
	All \hyperlink{il:packd}{packd} up and nowhere to go.
\end{center}

\normalsize	
\normalfont	

%\newpage
%\section{Web \texttt{URLS}}
%\input{jodurls}

%\input{jodsource}

	
