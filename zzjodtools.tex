\section{\texttt{jodtools} Source Code}

\begin{JODGroupHeader}
\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{NB.*jodtools c{-}{-} derived tools class: extension of (jodutil).}
\CommentTok{NB.}
\CommentTok{NB. Interface words:}
\CommentTok{NB.  addgrp   add words/tests to group/suite                                          }
\CommentTok{NB.  allnames combines names from (refnames) and (obnames)                            }
\CommentTok{NB.  allrefs  all names referenced by objects on name list                            }
\CommentTok{NB.  delgrp   remove words/tests from groups/suites                                   }
\CommentTok{NB.  getrx    get required to execute                                                 }
\CommentTok{NB.  hlpnl    displays short descriptions of objects on (y)                          }
\CommentTok{NB.  jodage   days since last change and creation of JOD objects}
\CommentTok{NB.  jodhelp   display online JOD help                     }
\CommentTok{NB.  lg       make and load JOD group                                                 }
\CommentTok{NB.  mls      make load script                                                                                               }
\CommentTok{NB.  noexp    returns a list of objects with no explanations                          }
\CommentTok{NB.  notgrp   words or tests from (y) that are not in groups or suites               }
\CommentTok{NB.  nt       gets name and text from edit windows                                    }
\CommentTok{NB.  nw       edit a new explicit word using JOD conventions                          }
\CommentTok{NB.  obnames  unique sorted object and locale names from (uses) result                }
\CommentTok{NB.  pr       put and cross reference a word {-} very handy as an editor DOCUMENTCOMMAND}
\CommentTok{NB.  refnames unique sorted reference names from (uses) result                        }
\CommentTok{NB.  revonex  returns a list of put dictionary objects with no explanations           }
\CommentTok{NB.  swex     set short word explaination from (doc) header                           }
\CommentTok{NB.  usedby   returns a list of words from (y) that DIRECTLY call words on (x)      }
\CommentTok{NB.}
\CommentTok{NB. Notes:}
\CommentTok{NB.   Error messages (jodtools range 00400{-}001000)}

\RegionMarkerTok{(}\DecValTok{9}\KeywordTok{!:}\DecValTok{41}\RegionMarkerTok{)} \DecValTok{0}  \CommentTok{NB. discard whitespace}

\NormalTok{coclass }\StringTok{\textquotesingle{}ajodtools\textquotesingle{}}
\NormalTok{coinsert  }\StringTok{\textquotesingle{}ajodutil\textquotesingle{}}

\CommentTok{NB.*end{-}header}
\end{Highlighting}
\end{Shaded}
\end{JODGroupHeader}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{NB. jodage header text}
\NormalTok{AGEHEADER}\AlertTok{=:}\index{AGEHEADER@\texttt{AGEHEADER}} \KeywordTok{<;.}\NormalTok{\_}\DecValTok{1} \StringTok{\textquotesingle{}|Name|Date First put|Days from First put|Date Last put|Days from Last put\textquotesingle{}}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{NB. carriage return character}
\NormalTok{CR}\AlertTok{=:}\index{CR@\texttt{CR}} \DecValTok{13}\KeywordTok{\{a.}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{NB. nw edit text template}
\NormalTok{DOCUMENTMARK}\AlertTok{=:}\index{DOCUMENTMARK@\texttt{DOCUMENTMARK}} \DecValTok{123} \DecValTok{126} \DecValTok{78} \DecValTok{126} \DecValTok{125} \DecValTok{61} \DecValTok{58} \DecValTok{32} \DecValTok{123} \DecValTok{126} \DecValTok{67} \DecValTok{126} \DecValTok{125} \DecValTok{32} \DecValTok{58} \DecValTok{32} \DecValTok{48} \DecValTok{10} \DecValTok{10} \DecValTok{78} \DecValTok{66} \DecValTok{46} \DecValTok{42} \DecValTok{123} \DecValTok{126} \DecValTok{78} \DecValTok{126} 
\AlertTok{>..>}\DecValTok{125} \DecValTok{32} \DecValTok{123} \DecValTok{126} \DecValTok{84} \DecValTok{126} \DecValTok{125} \DecValTok{45} \DecValTok{45} \DecValTok{32} \DecValTok{119} \DecValTok{111} \DecValTok{114} \DecValTok{100} \DecValTok{116} \DecValTok{101} \DecValTok{120} \DecValTok{116} \DecValTok{10} \DecValTok{78} \DecValTok{66} \DecValTok{46} \DecValTok{10} \DecValTok{78} \DecValTok{66} \DecValTok{46} \DecValTok{32} \DecValTok{109} \DecValTok{111} \DecValTok{110} 
\AlertTok{>..>}\DecValTok{97} \DecValTok{100} \DecValTok{58} \DecValTok{32} \DecValTok{32} \DecValTok{123} \DecValTok{126} \DecValTok{78} \DecValTok{126} \DecValTok{125} \DecValTok{32} \DecValTok{63} \DecValTok{63} \DecValTok{10} \DecValTok{78} \DecValTok{66} \DecValTok{46} \DecValTok{32} \DecValTok{100} \DecValTok{121} \DecValTok{97} \DecValTok{100} \DecValTok{58} \DecValTok{32} \DecValTok{32} \DecValTok{63} \DecValTok{63} \DecValTok{32} \DecValTok{123} \DecValTok{126} \DecValTok{78} \DecValTok{126}
\AlertTok{>..>} \DecValTok{125} \DecValTok{32} \DecValTok{63} \DecValTok{63} \DecValTok{10} \DecValTok{10} \DecValTok{39} \DecValTok{78} \DecValTok{73} \DecValTok{77} \DecValTok{80} \DecValTok{32} \DecValTok{123} \DecValTok{126} \DecValTok{78} \DecValTok{126} \DecValTok{125} \DecValTok{39} \DecValTok{10} \DecValTok{41}\KeywordTok{\{a.}

\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{ERR00400}\AlertTok{=:}\index{ERR00400@\texttt{ERR00400}} \StringTok{\textquotesingle{}load script is not unique {-} edit startup.ijs {-}>\textquotesingle{}}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{ERR00401}\AlertTok{=:}\index{ERR00401@\texttt{ERR00401}} \StringTok{\textquotesingle{}tag error in startup.ijs file {-}>\textquotesingle{}}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{ERR00402}\AlertTok{=:}\index{ERR00402@\texttt{ERR00402}} \StringTok{\textquotesingle{}cannot write/create startup.ijs file {-}>\textquotesingle{}}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{ERR00403}\AlertTok{=:}\index{ERR00403@\texttt{ERR00403}} \StringTok{\textquotesingle{}invalid make load script option (0 or 1)\textquotesingle{}}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{ERR00404}\AlertTok{=:}\index{ERR00404@\texttt{ERR00404}} \StringTok{\textquotesingle{}J script error in group {-}>\textquotesingle{}}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{ERR00405}\AlertTok{=:}\index{ERR00405@\texttt{ERR00405}} \StringTok{\textquotesingle{}words refer to objects/locales {-}>\textquotesingle{}}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{ERR00406}\AlertTok{=:}\index{ERR00406@\texttt{ERR00406}} \StringTok{\textquotesingle{}invalid delimiter\textquotesingle{}}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{ERR00407}\AlertTok{=:}\index{ERR00407@\texttt{ERR00407}} \StringTok{\textquotesingle{}ROOTFOLDER must be a character list configured (jpath) expression like: \textasciitilde{}user/jodroot\textquotesingle{}}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{ERR00408}\AlertTok{=:}\index{ERR00408@\texttt{ERR00408}} \StringTok{\textquotesingle{}unable to write load script {-}>\textquotesingle{}}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{NB. locgrp Group Suite display text}
\NormalTok{GROUPSUITES}\AlertTok{=:}\index{GROUPSUITES@\texttt{GROUPSUITES}} \KeywordTok{<;.}\NormalTok{\_}\DecValTok{1} \StringTok{\textquotesingle{} Groups Suites\textquotesingle{}}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{NB. JODTOOLS interface {-} loaded into (ijod) {-} see (setjodinterface)}
\NormalTok{IzJODtools}\AlertTok{=:}\index{IzJODtools@\texttt{IzJODtools}} \KeywordTok{<;.}\NormalTok{\_}\DecValTok{1}\NormalTok{ \textquotesingle{} addgrp allnames allrefs delgrp fsen getrx hlpnl jodage lg locgrp ltx mls noexp notgrp }
\AlertTok{>..>}\NormalTok{ nt nw obnames pr refnames revonex swex usedby\textquotesingle{}}

\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{NB. comment tag marking end of scripts}
\NormalTok{JODLOADEND}\AlertTok{=:}\index{JODLOADEND@\texttt{JODLOADEND}} \StringTok{\textquotesingle{}NB.</JOD\_Load\_Scripts>\textquotesingle{}}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{NB. comment tag marking start of scripts}
\NormalTok{JODLOADSTART}\AlertTok{=:}\index{JODLOADSTART@\texttt{JODLOADSTART}} \StringTok{\textquotesingle{}NB.<JOD\_Load\_Scripts>\textquotesingle{}}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{NB. JODTOOLS version, make and date}
\NormalTok{JODTOOLSVMD}\AlertTok{=:}\index{JODTOOLSVMD@\texttt{JODTOOLSVMD}} \StringTok{\textquotesingle{}1.0.2 {-} dev\textquotesingle{}}\KeywordTok{;}\DecValTok{01}\KeywordTok{;}\StringTok{\textquotesingle{}15 May 2020 16:44:55\textquotesingle{}}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{NB. line feed character}
\NormalTok{LF}\AlertTok{=:}\index{LF@\texttt{LF}} \DecValTok{10}\KeywordTok{\{a.}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{OK00400}\AlertTok{=:}\index{OK00400@\texttt{OK00400}} \StringTok{\textquotesingle{}load script saved {-}>\textquotesingle{}}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{OK00401}\AlertTok{=:}\index{OK00401@\texttt{OK00401}} \StringTok{\textquotesingle{}file saved {-}>\textquotesingle{}}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{OK00402}\AlertTok{=:}\index{OK00402@\texttt{OK00402}} \StringTok{\textquotesingle{} added to {-}>\textquotesingle{}}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{OK00403}\AlertTok{=:}\index{OK00403@\texttt{OK00403}} \StringTok{\textquotesingle{} deleted from {-}>\textquotesingle{}}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{OK00404}\AlertTok{=:}\index{OK00404@\texttt{OK00404}} \StringTok{\textquotesingle{} group loaded\textquotesingle{}}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{OK00405}\AlertTok{=:}\index{OK00405@\texttt{OK00405}} \StringTok{\textquotesingle{} group loaded with postprocessor\textquotesingle{}}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{OK00406}\AlertTok{=:}\index{OK00406@\texttt{OK00406}} \StringTok{\textquotesingle{}) words loaded into {-}> \textquotesingle{}}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{NB. postprocessor prefix}
\NormalTok{POSTAMBLEPFX}\AlertTok{=:}\index{POSTAMBLEPFX@\texttt{POSTAMBLEPFX}} \StringTok{\textquotesingle{}POST\_\textquotesingle{}}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{NB. name of test used as a template}
\NormalTok{TESTSTUB}\AlertTok{=:}\index{TESTSTUB@\texttt{TESTSTUB}} \StringTok{\textquotesingle{}teststub\textquotesingle{}}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{WARNING00400}\AlertTok{=:}\index{WARNING00400@\texttt{WARNING00400}} \StringTok{\textquotesingle{}NB. WARNING: JOD managed section do not edit!\textquotesingle{}}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{NB. words tests display text}
\NormalTok{WORDTESTS}\AlertTok{=:}\index{WORDTESTS@\texttt{WORDTESTS}} \KeywordTok{<;.}\NormalTok{\_}\DecValTok{1} \StringTok{\textquotesingle{} words tests\textquotesingle{}}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{addgrp}\AlertTok{=:}\index{addgrp@\texttt{addgrp}} \DecValTok{4} \RegionMarkerTok{: 0}

\CommentTok{NB.*addgrp v{-}{-} add words/tests to group/suite.}
\CommentTok{NB.}
\CommentTok{NB. monad:  clGroup addgrp blclNames}
\CommentTok{NB.         (clGroupSuite;iaObject) addgrp blclNames}
\CommentTok{NB.}
\CommentTok{NB.   \textquotesingle{}jodhlp\textquotesingle{} addgrp  ;:\textquotesingle{}addgrp delgrp\textquotesingle{}}
\CommentTok{NB.   (\textquotesingle{}testsuite\textquotesingle{};3) addgrp ;:\textquotesingle{}test and moretests\textquotesingle{}}

\StringTok{\textquotesingle{}group code\textquotesingle{}}\KeywordTok{=.} \DecValTok{2}\KeywordTok{\{.}\RegionMarkerTok{(}\NormalTok{boxopen }\KeywordTok{x}\RegionMarkerTok{)}\KeywordTok{,<}\DecValTok{2}
\NormalTok{uv0}\KeywordTok{=.}\NormalTok{ code grp group}
\KeywordTok{if.} \DecValTok{0}\KeywordTok{=>\{.}\NormalTok{uv0 }\KeywordTok{do.}\NormalTok{ uv0}
\KeywordTok{elseif.} \DecValTok{1}\KeywordTok{=>\{.}\NormalTok{uv0}\KeywordTok{=.}\NormalTok{code grp }\RegionMarkerTok{(}\NormalTok{group}\KeywordTok{;\}.}\NormalTok{uv0}\RegionMarkerTok{)}\KeywordTok{,y=.}\NormalTok{boxopen }\KeywordTok{y} \KeywordTok{do.}
\NormalTok{  gtyp}\KeywordTok{=.,>}\RegionMarkerTok{(}\NormalTok{code}\KeywordTok{=}\DecValTok{2} \DecValTok{3}\RegionMarkerTok{)}\KeywordTok{\#}\NormalTok{WORDTESTS}
\NormalTok{  ok }\RegionMarkerTok{((}\KeywordTok{":\#y}\RegionMarkerTok{)}\KeywordTok{,}\StringTok{\textquotesingle{} \textquotesingle{}}\KeywordTok{,}\NormalTok{gtyp}\KeywordTok{,}\NormalTok{OK00402}\RegionMarkerTok{)}\KeywordTok{;}\NormalTok{group }\CommentTok{NB. okmsg: added to}
\KeywordTok{elseif.do.}\NormalTok{ uv0}
\KeywordTok{end.}
\RegionMarkerTok{)}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{addloadscript}\AlertTok{=:}\index{addloadscript@\texttt{addloadscript}} \DecValTok{4} \RegionMarkerTok{: 0}

\CommentTok{NB.*addloadscript  v{-}{-}  inserts  (mls)  generated   scripts  into}
\CommentTok{NB. startup.ijs.}
\CommentTok{NB.}
\CommentTok{NB. Changed: 08jun12 this verb was modifying the scripts.ijs file}
\CommentTok{NB. in the  J system tree. This file is now frequently updated by}
\CommentTok{NB. JAL so startup.ijs is now modified.}
\CommentTok{NB.}
\CommentTok{NB. Changed:  11feb02 j  7.01  introduced Public\_j\_  in place  of}
\CommentTok{NB. PUBLIC\_j\_  modified   to   use  new  noun.   Path  separation}
\CommentTok{NB. characters also standardized.}
\CommentTok{NB.}
\CommentTok{NB. dyad:  baPublic addloadscript (clGroup ; clPathGroup)}

\CommentTok{NB. standardize path separation character}
\KeywordTok{y} \KeywordTok{=.}\NormalTok{ jpathsep}\KeywordTok{\&.>} \KeywordTok{y}

\KeywordTok{if.} \DecValTok{1}\KeywordTok{=x} \KeywordTok{do.}

  \CommentTok{NB. get startup.ijs}
  \CommentTok{NB. J path utility !(*)=. jpath}
\NormalTok{  tags}\KeywordTok{=.}\NormalTok{ JODLOADSTART}\KeywordTok{;}\NormalTok{JODLOADEND}
  \KeywordTok{if.}\NormalTok{ fex}\KeywordTok{<}\NormalTok{cfg}\KeywordTok{=.}\NormalTok{ jpath }\StringTok{\textquotesingle{}\textasciitilde{}config/startup.ijs\textquotesingle{}} \KeywordTok{do.}
\NormalTok{    scripts}\KeywordTok{=.}\NormalTok{ read cfg}
    \StringTok{\textquotesingle{}p c\textquotesingle{}}\KeywordTok{=.}\NormalTok{ tags betweenidx scripts}
  \KeywordTok{else.}
    \CommentTok{NB. no startup.ijs}
\NormalTok{    p}\KeywordTok{=.}\NormalTok{ scripts}\KeywordTok{=.} \StringTok{\textquotesingle{}\textquotesingle{}}
  \KeywordTok{end.}

  \KeywordTok{if.} \DecValTok{1}\KeywordTok{=\#}\NormalTok{p }\KeywordTok{do.}
    \KeywordTok{if.}\NormalTok{ badrc ld}\KeywordTok{=.} \RegionMarkerTok{(}\KeywordTok{;}\NormalTok{p}\KeywordTok{\{}\NormalTok{c}\RegionMarkerTok{)}\NormalTok{ addloadscript1 }\KeywordTok{y} \KeywordTok{do.}\NormalTok{ ld }\KeywordTok{return.} \KeywordTok{else.}\NormalTok{ ld}\KeywordTok{=.>}\DecValTok{1}\KeywordTok{\{}\NormalTok{ld }\KeywordTok{end.}
    \CommentTok{NB. insure \textquotesingle{}buildpublic\textquotesingle{} text starts with an LF}
\NormalTok{    mlscfg}\KeywordTok{=.}\NormalTok{ toHOST }\KeywordTok{;}\RegionMarkerTok{(}\KeywordTok{<}\RegionMarkerTok{(}\NormalTok{LF }\KeywordTok{\}.\textasciitilde{}}\NormalTok{ LF}\KeywordTok{{-}:\{.}\NormalTok{ld}\RegionMarkerTok{)}\KeywordTok{,}\NormalTok{ld}\RegionMarkerTok{)}\NormalTok{ p}\KeywordTok{\}}\NormalTok{ c}
  \KeywordTok{elseif.} \DecValTok{0}\KeywordTok{=\#}\NormalTok{p }\KeywordTok{do.}
    \CommentTok{NB. no JOD load scripts append current}
\NormalTok{    ld}\KeywordTok{=.} \RegionMarkerTok{(}\DecValTok{0}\KeywordTok{\{}\NormalTok{tags}\RegionMarkerTok{)}\KeywordTok{,}\RegionMarkerTok{(}\KeywordTok{<}\NormalTok{LF}\KeywordTok{,}\StringTok{\textquotesingle{}buildpublic\_j\_ 0 : 0\textquotesingle{}}\KeywordTok{,}\NormalTok{LF}\RegionMarkerTok{)}\KeywordTok{,}\RegionMarkerTok{(}\DecValTok{0}\KeywordTok{\{y}\RegionMarkerTok{)}\KeywordTok{,}\RegionMarkerTok{(}\KeywordTok{<}\StringTok{\textquotesingle{}  \textquotesingle{}}\RegionMarkerTok{)}\KeywordTok{,}\RegionMarkerTok{(}\DecValTok{1}\KeywordTok{\{y}\RegionMarkerTok{)}\KeywordTok{,}\RegionMarkerTok{(}\KeywordTok{<}\NormalTok{LF}\KeywordTok{,}\StringTok{\textquotesingle{})\textquotesingle{}}\KeywordTok{,}\NormalTok{LF}\RegionMarkerTok{)}\KeywordTok{,}\DecValTok{1}\KeywordTok{\{}\NormalTok{tags}
\NormalTok{    mlscfg}\KeywordTok{=.}\NormalTok{ toHOST scripts }\KeywordTok{,} \RegionMarkerTok{(}\DecValTok{2}\KeywordTok{\#}\NormalTok{LF}\RegionMarkerTok{)}\KeywordTok{,}\NormalTok{ WARNING00400 }\KeywordTok{,}\NormalTok{ LF }\KeywordTok{,} \KeywordTok{;}\NormalTok{ld}
  \KeywordTok{elseif.do.}
    \CommentTok{NB. errmsg: tag error in startup.ijs file}
    \RegionMarkerTok{(}\NormalTok{jderr ERR00401}\RegionMarkerTok{)}\KeywordTok{,<}\NormalTok{cfg }\KeywordTok{return.}
  \KeywordTok{end.}

  \CommentTok{NB. create/update startup.ijs}
  \KeywordTok{if.} \DecValTok{\_1} \KeywordTok{{-}:}\NormalTok{ mlscfg }\RegionMarkerTok{(}\NormalTok{write }\KeywordTok{::} \KeywordTok{\_1:}\RegionMarkerTok{)}\NormalTok{ cfg }\KeywordTok{do.}
    \CommentTok{NB. errmsg: cannot write/create startup.ijs file}
    \RegionMarkerTok{(}\NormalTok{jderr ERR00402}\RegionMarkerTok{)}\KeywordTok{,<}\NormalTok{cfg }\KeywordTok{return.}
  \KeywordTok{end.}

  \CommentTok{NB. directly update public script noun if present}
  \KeywordTok{y=.}  \KeywordTok{y} \KeywordTok{,\&.>} \StringTok{\textquotesingle{}\textquotesingle{}}\KeywordTok{;}\NormalTok{IJS}
  \KeywordTok{if.}\NormalTok{     wex }\KeywordTok{<}\StringTok{\textquotesingle{}Public\_j\_\textquotesingle{}} \KeywordTok{do.}\NormalTok{ Public}\DecValTok{\_j\_}\AlertTok{=:}\index{Public\_j\_@\texttt{Public\_j\_}}\NormalTok{  Public}\DecValTok{\_j\_}\NormalTok{ updatepublic }\KeywordTok{y}  \CommentTok{NB. J 7.0x}
  \KeywordTok{elseif.}\NormalTok{ wex }\KeywordTok{<}\StringTok{\textquotesingle{}PUBLIC\_j\_\textquotesingle{}} \KeywordTok{do.}\NormalTok{ PUBLIC}\DecValTok{\_j\_}\AlertTok{=:}\index{PUBLIC\_j\_@\texttt{PUBLIC\_j\_}}\NormalTok{  PUBLIC}\DecValTok{\_j\_}\NormalTok{ updatepublic }\KeywordTok{y}  \CommentTok{NB. J 6.0x}
  \KeywordTok{end.}

\NormalTok{  ok OK00400}\KeywordTok{;}\DecValTok{1}\KeywordTok{\{y}  \CommentTok{NB. okmsg: load script saved}
\KeywordTok{elseif.} \DecValTok{0}\KeywordTok{=x} \KeywordTok{do.}
\NormalTok{  ok OK00401}\KeywordTok{;}\RegionMarkerTok{(}\DecValTok{1}\KeywordTok{\{y}\RegionMarkerTok{)} \KeywordTok{,\&.>} \KeywordTok{<}\NormalTok{IJS }\CommentTok{NB. okmsg: file saved}
\KeywordTok{elseif.do.}
  \CommentTok{NB. errmsg: invalid make load script option (0 or 1)}
\NormalTok{  jderr ERR00403}
\KeywordTok{end.}
\RegionMarkerTok{)}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{addloadscript1}\AlertTok{=:}\index{addloadscript1@\texttt{addloadscript1}} \DecValTok{4} \RegionMarkerTok{: 0}

\CommentTok{NB.*addloadscript1 v{-}{-} appends or replaces a script in the load script section of startup.ijs}
\CommentTok{NB.}
\CommentTok{NB. dyad:  clJODLoadScripts addloadscript1 (clGroup ; clPath)}

\CommentTok{NB. insure we have text}
\KeywordTok{if.} \DecValTok{0}\KeywordTok{=\#x} \KeywordTok{do.}\NormalTok{ ok }\KeywordTok{x} \KeywordTok{return.} \KeywordTok{end.}

\CommentTok{NB. cut into lines}
\NormalTok{ldl}\KeywordTok{=.} \KeywordTok{<;.}\NormalTok{\_}\DecValTok{1} \RegionMarkerTok{((}\NormalTok{LF}\KeywordTok{=\{.x}\RegionMarkerTok{)}\KeywordTok{\}.}\NormalTok{LF}\RegionMarkerTok{)}\KeywordTok{,x} \KeywordTok{{-}.}\NormalTok{ CR}

\CommentTok{NB. search for group name {-} can occur at most once}
\CommentTok{NB. searches only group names ignoring path file text}
\NormalTok{msk}\KeywordTok{=.} \RegionMarkerTok{(}\StringTok{\textquotesingle{} \textquotesingle{}}\KeywordTok{\&}\NormalTok{beforestr }\KeywordTok{\&.>}\NormalTok{ ldl}\RegionMarkerTok{)} \KeywordTok{e.} \DecValTok{0}\KeywordTok{\{y}
\KeywordTok{if.} \DecValTok{1} \KeywordTok{>:} \KeywordTok{+/}\NormalTok{msk }\KeywordTok{do.}

  \CommentTok{NB. load script name and path}
\NormalTok{  scr}\KeywordTok{=.} \KeywordTok{<;}\RegionMarkerTok{(}\KeywordTok{<}\StringTok{\textquotesingle{}  \textquotesingle{}}\RegionMarkerTok{)} \RegionMarkerTok{(}\DecValTok{1}\RegionMarkerTok{)}\KeywordTok{\}} \DecValTok{1} \DecValTok{0} \DecValTok{1} \KeywordTok{\#\^{}:}\NormalTok{\_}\DecValTok{1} \KeywordTok{y}

  \CommentTok{NB. add extension if missing}
  \KeywordTok{if.} \KeywordTok{{-}.}\NormalTok{IJS }\KeywordTok{{-}:} \KeywordTok{;}\RegionMarkerTok{(}\KeywordTok{{-}\#}\NormalTok{IJS}\RegionMarkerTok{)} \KeywordTok{\{.\&.>}\NormalTok{ scr }\KeywordTok{do.}\NormalTok{ scr}\KeywordTok{=.}\NormalTok{ scr }\KeywordTok{,\&.>} \KeywordTok{<}\NormalTok{IJS }\KeywordTok{end.}

  \CommentTok{NB. if name exists replace it else add it at end}
  \KeywordTok{if.} \KeywordTok{+./}\NormalTok{msk }\KeywordTok{do.}
\NormalTok{    ldl}\KeywordTok{=.}\NormalTok{ scr }\RegionMarkerTok{(}\KeywordTok{I.}\NormalTok{ msk}\RegionMarkerTok{)}\KeywordTok{\}}\NormalTok{ ldl}
  \KeywordTok{else.}
    \CommentTok{NB. find ) and insert before}
\NormalTok{    msk}\KeywordTok{=.} \DecValTok{1} \KeywordTok{,\textasciitilde{}} \KeywordTok{{-}.} \RegionMarkerTok{(}\NormalTok{ldl }\KeywordTok{{-}.\&.>} \StringTok{\textquotesingle{} \textquotesingle{}}\RegionMarkerTok{)} \KeywordTok{e.} \KeywordTok{<,}\StringTok{\textquotesingle{})\textquotesingle{}}
\NormalTok{    ldl}\KeywordTok{=.}\NormalTok{ scr }\RegionMarkerTok{(}\KeywordTok{I.} \KeywordTok{{-}.}\NormalTok{msk}\RegionMarkerTok{)}\KeywordTok{\}}\NormalTok{ msk }\KeywordTok{\#\^{}:}\NormalTok{\_}\DecValTok{1}\NormalTok{ ldl}
  \KeywordTok{end.}

  \CommentTok{NB. return modified}
\NormalTok{  ok }\KeywordTok{\}.} \KeywordTok{;}\NormalTok{ LF }\KeywordTok{,\&.>}\NormalTok{ ldl}
\KeywordTok{else.}
  \CommentTok{NB. errmsg: load script is not unique}
  \RegionMarkerTok{(}\NormalTok{jderr ERR00400}\RegionMarkerTok{)}\KeywordTok{,}\DecValTok{0}\KeywordTok{\{y}
\KeywordTok{end.}
\RegionMarkerTok{)}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{NB. all names from uses:  allnames 31 uses \textquotesingle{}name\textquotesingle{}}
\NormalTok{allnames}\AlertTok{=:}\index{allnames@\texttt{allnames}} \KeywordTok{\textasciitilde{}.@}\RegionMarkerTok{(}\StringTok{\textquotesingle{}\_\_\textquotesingle{}}\KeywordTok{\&}\NormalTok{beforestr}\KeywordTok{\&.>@}\NormalTok{obnames }\KeywordTok{,}\NormalTok{ refnames}\RegionMarkerTok{)}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{NB. all nonlocale name references: allrefs ;:\textquotesingle{}return my references\textquotesingle{}}
\NormalTok{allrefs}\AlertTok{=:}\index{allrefs@\texttt{allrefs}} \KeywordTok{[:} \KeywordTok{/:\textasciitilde{}} \KeywordTok{[:} \KeywordTok{\textasciitilde{}.} \KeywordTok{]} \KeywordTok{,} \KeywordTok{[:}\NormalTok{ refnames }\DecValTok{31}\KeywordTok{\&}\NormalTok{uses}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{betweenidx}\AlertTok{=:}\index{betweenidx@\texttt{betweenidx}} \DecValTok{4} \RegionMarkerTok{: 0}

\CommentTok{NB.*betweenidx v{-}{-} indexed sublists between nonnested delimiters.}
\CommentTok{NB.}
\CommentTok{NB. Cuts  up  lists   containing   balanced  nonnested  start/end}
\CommentTok{NB. delimiters into boxed lists of indexed sublists.}
\CommentTok{NB.}
\CommentTok{NB. Note:  this  verb does a simple count for  delimiter balance.}
\CommentTok{NB. This  is  a   necessary  but  not  sufficient  condition  for}
\CommentTok{NB. delimiter balance.}
\CommentTok{NB.}
\CommentTok{NB. dyad:  (ilIdx ;< blcl) =. (clStart;clEnd) betweenidx cl}
\CommentTok{NB.        (ilIds ;< blnl) =. (nlStart;nlEnd) betweenidx nl}
\CommentTok{NB.}
\CommentTok{NB.   (\textquotesingle{}start\textquotesingle{};\textquotesingle{}end\textquotesingle{}) betweenidx \textquotesingle{}start yada yada end boo hoo start ahh end\textquotesingle{}}
\CommentTok{NB.}
\CommentTok{NB.   \textquotesingle{}\{\}\textquotesingle{} betweenidx \textquotesingle{}go\{ahead\}\{\}cut\{me\}\{up\}\{\}\textquotesingle{}}
\CommentTok{NB.}
\CommentTok{NB.   NB. also applies to numeric delimiters}
\CommentTok{NB.   (1 1;2 2) betweenidx 1 1 66 666 2 2 7 87 1 1 0 2 2}

\KeywordTok{if.} \KeywordTok{\#y} \KeywordTok{do.}
  \StringTok{\textquotesingle{}s e\textquotesingle{}}\KeywordTok{=.} \KeywordTok{x}                      \CommentTok{NB. start/end delimiters}
  \KeywordTok{assert.} \KeywordTok{{-}.}\NormalTok{ s }\KeywordTok{{-}:}\NormalTok{ e              }\CommentTok{NB. they must differ}
\NormalTok{  em}\KeywordTok{=.}\NormalTok{ e }\KeywordTok{E.} \KeywordTok{y}                    \CommentTok{NB. end mask}
\NormalTok{  sm}\KeywordTok{=.} \RegionMarkerTok{(}\KeywordTok{{-}\#}\NormalTok{s}\RegionMarkerTok{)} \KeywordTok{|.!.}\DecValTok{0}\NormalTok{ s }\KeywordTok{E.} \KeywordTok{y}        \CommentTok{NB. start mask}
\NormalTok{  mc}\KeywordTok{=.} \KeywordTok{+/}\NormalTok{sm                      }\CommentTok{NB. middle count}
  \KeywordTok{assert.}\NormalTok{ mc}\KeywordTok{=+/}\NormalTok{em                }\CommentTok{NB. delimiter balance}
\NormalTok{  c}\KeywordTok{=.} \RegionMarkerTok{(}\DecValTok{1} \RegionMarkerTok{(}\DecValTok{0}\RegionMarkerTok{)}\KeywordTok{\}}\NormalTok{ sm }\KeywordTok{+.}\NormalTok{ em}\RegionMarkerTok{)} \KeywordTok{<;.}\DecValTok{1} \KeywordTok{y}   \CommentTok{NB. cut list}

  \CommentTok{NB. insert any missing middles to insure all indexed}
  \CommentTok{NB. sublists correspond to a location in the cut list}
\NormalTok{  ex}\KeywordTok{=.} \DecValTok{1} \KeywordTok{\#\textasciitilde{}} \KeywordTok{>:} \KeywordTok{+:}\NormalTok{ mc}
\NormalTok{  ex}\KeywordTok{=.} \RegionMarkerTok{(}\KeywordTok{{-}.}\NormalTok{ sm }\KeywordTok{\{.;.}\DecValTok{1}\NormalTok{ em}\RegionMarkerTok{)} \RegionMarkerTok{(}\KeywordTok{>:} \KeywordTok{+:} \KeywordTok{i.}\NormalTok{ mc}\RegionMarkerTok{)}\KeywordTok{\}}\NormalTok{ ex}
\NormalTok{  c}\KeywordTok{=.}\NormalTok{ ex }\KeywordTok{\#\^{}:}\NormalTok{\_}\DecValTok{1}\NormalTok{ c}

  \RegionMarkerTok{((}\KeywordTok{\#} \KeywordTok{i.@\#}\RegionMarkerTok{)} \RegionMarkerTok{(}\KeywordTok{\#}\NormalTok{c}\RegionMarkerTok{)}\KeywordTok{$}\DecValTok{0} \DecValTok{1}\RegionMarkerTok{)}\KeywordTok{;<}\NormalTok{c         }\CommentTok{NB. prefix indexes}
\KeywordTok{else.}
  \RegionMarkerTok{(}\KeywordTok{i.}\DecValTok{0}\RegionMarkerTok{)}\KeywordTok{;<y}                       \CommentTok{NB. empty arg result}
\KeywordTok{end.}
\RegionMarkerTok{)}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{createjodtools}\AlertTok{=:}\index{createjodtools@\texttt{createjodtools}} \DecValTok{3} \RegionMarkerTok{: 0}

\CommentTok{NB.*createjodtools v{-}{-} initializes new jod tools object}
\CommentTok{NB.}
\CommentTok{NB. monad:  createjodtools blclObjects}
\CommentTok{NB.}
\CommentTok{NB.   JODtools\_ijod\_=: conew \textquotesingle{}ajodtools\textquotesingle{}        NB. new tools object}
\CommentTok{NB.   createjodtools\_\_JODtools JODtools,JODobj  NB. pass self and tools}

\CommentTok{NB. use JOD object reference to locate extant subobjects}
\CommentTok{NB. Note: currently these object references are not used}
\CommentTok{NB. but are defined so that native JOD words can be accessed}
\CommentTok{NB. by words in JODtools instances in future additions to this class}
\CommentTok{NB. !(*)=. ST MK UT SO}
\NormalTok{self}\KeywordTok{=.}\DecValTok{0}\KeywordTok{\{y} \KeywordTok{[}\NormalTok{ jod}\KeywordTok{=.}\DecValTok{1}\KeywordTok{\{y}
\NormalTok{ST}\AlertTok{=:}\index{ST@\texttt{ST}}\NormalTok{ ST\_\_jod}
\NormalTok{MK}\AlertTok{=:}\index{MK@\texttt{MK}}\NormalTok{ MK\_\_jod}
\NormalTok{UT}\AlertTok{=:}\index{UT@\texttt{UT}}\NormalTok{ UT\_\_jod}
\NormalTok{SO}\AlertTok{=:}\index{SO@\texttt{SO}}\NormalTok{ SO\_\_jod}

\CommentTok{NB. append object reference to list of JOD extensions}
\CommentTok{NB. adding to this list allows (destroyjod) to destroy}
\CommentTok{NB. all JOD extension objects with JOD core objects}
\NormalTok{JODEXT\_\_jod}\AlertTok{=:}\index{JODEXT\_\_jod@\texttt{JODEXT\_\_jod}}\NormalTok{  JODEXT\_\_jod}\KeywordTok{,}\NormalTok{self}

\CommentTok{NB. add tool words to overall JOD (ijod) locale interface}
\CommentTok{NB. (*)=. IZJODALL JODEXT}
\NormalTok{IZJODALL\_\_jod}\AlertTok{=:}\index{IZJODALL\_\_jod@\texttt{IZJODALL\_\_jod}}\NormalTok{  IZJODALL\_\_jod}\KeywordTok{,}\NormalTok{IzJODtools}\KeywordTok{,<}\StringTok{\textquotesingle{}JODtools\textquotesingle{}}

\CommentTok{NB. define direct (ijod) locale interface for tools {-} if the (ijod)}
\CommentTok{NB. trap word (jodsf) exists define an error trapping interface}
\RegionMarkerTok{(}\KeywordTok{i.}\DecValTok{0} \DecValTok{0}\RegionMarkerTok{)}\KeywordTok{"}\NormalTok{\_ }\KeywordTok{".\&.>}\NormalTok{ self defzface IzJODtools}
\RegionMarkerTok{)}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{dayage}\AlertTok{=:}\index{dayage@\texttt{dayage}} \DecValTok{3} \RegionMarkerTok{: 0}

\CommentTok{NB.*dayage v{-}{-} age in days.}
\CommentTok{NB.}
\CommentTok{NB. monad:  dayage ilYYYYMMDD}
\CommentTok{NB.}
\CommentTok{NB.   dayage 1953 7 2}
\CommentTok{NB.}
\CommentTok{NB. dyad:  pa dayage iaYYYYMMDD | iuYYYYMMDD}
\CommentTok{NB.}
\CommentTok{NB.   1 dayage 4 4$20000101 19500202 19000303}
\CommentTok{NB.   0 dayage 1986 8 14}

\DecValTok{0}\NormalTok{ dayage }\KeywordTok{y}
\KeywordTok{:}
\KeywordTok{if.} \KeywordTok{x} \KeywordTok{do.} \KeywordTok{n=.}\NormalTok{ today}\KeywordTok{\textasciitilde{}} \DecValTok{0} \KeywordTok{else.} \KeywordTok{n=.}\NormalTok{ today }\DecValTok{0} \KeywordTok{end.}
\RegionMarkerTok{(}\KeywordTok{x}\NormalTok{ todayno }\KeywordTok{n}\RegionMarkerTok{)} \KeywordTok{{-}} \KeywordTok{x}\NormalTok{ todayno }\KeywordTok{y}
\RegionMarkerTok{)}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{delgrp}\AlertTok{=:}\index{delgrp@\texttt{delgrp}} \DecValTok{4} \RegionMarkerTok{: 0}

\CommentTok{NB.*delgrp v{-}{-} remove words/tests from groups/suites.}
\CommentTok{NB.}
\CommentTok{NB. monad:  clGroup delgrp blclNames}
\CommentTok{NB.         (clGroupSuite;iaObject) delgrp blclNames}
\CommentTok{NB.}
\CommentTok{NB.   \textquotesingle{}jodhlp\textquotesingle{} delgrp  ;:\textquotesingle{}addgrp delgrp\textquotesingle{}}
\CommentTok{NB.   (\textquotesingle{}testsuite\textquotesingle{};3) delgrp ;:\textquotesingle{}test and moretests\textquotesingle{}}

\StringTok{\textquotesingle{}group code\textquotesingle{}}\KeywordTok{=.} \DecValTok{2}\KeywordTok{\{.}\RegionMarkerTok{(}\NormalTok{boxopen }\KeywordTok{x}\RegionMarkerTok{)}\KeywordTok{,<}\DecValTok{2}
\NormalTok{uv0}\KeywordTok{=.}\NormalTok{ code grp group}
\KeywordTok{if.} \DecValTok{0}\KeywordTok{=>\{.}\NormalTok{uv0 }\KeywordTok{do.}\NormalTok{ uv0}
\KeywordTok{elseif.} \DecValTok{1}\KeywordTok{=>\{.}\NormalTok{uv0}\KeywordTok{=.}\NormalTok{code grp group}\KeywordTok{;\}.}\NormalTok{uv0}\KeywordTok{{-}.y=.}\NormalTok{boxopen }\KeywordTok{y} \KeywordTok{do.}
\NormalTok{  gtype}\KeywordTok{=.,>}\RegionMarkerTok{(}\NormalTok{code}\KeywordTok{=}\DecValTok{2} \DecValTok{3}\RegionMarkerTok{)}\KeywordTok{\#}\NormalTok{WORDTESTS}
\NormalTok{  ok }\RegionMarkerTok{((}\KeywordTok{":\#y}\RegionMarkerTok{)}\KeywordTok{,}\StringTok{\textquotesingle{} \textquotesingle{}}\KeywordTok{,}\NormalTok{gtype}\KeywordTok{,}\NormalTok{OK00403}\RegionMarkerTok{)}\KeywordTok{;}\NormalTok{group }\CommentTok{NB. okmsg: deleted from}
\KeywordTok{elseif.do.}\NormalTok{ uv0}
\KeywordTok{end.}
\RegionMarkerTok{)}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{firstcomment}\AlertTok{=:}\index{firstcomment@\texttt{firstcomment}} \DecValTok{3} \RegionMarkerTok{: 0}

\CommentTok{NB.*firstcomment v{-}{-} extracts the first comment sentence from J words.}
\CommentTok{NB.}
\CommentTok{NB. monad:  firstcomment clLinear}
\CommentTok{NB.}
\CommentTok{NB.   firstcomment 5!:5 <\textquotesingle{}firstcomment\textquotesingle{}}
\CommentTok{NB.   firstcomment disp \textquotesingle{}jodword\textquotesingle{}}
\CommentTok{NB.}
\CommentTok{NB.   NB. first comments from many JOD non{-}nouns}
\CommentTok{NB.   n=. (\}. grp \textquotesingle{}JOD\textquotesingle{}) {-}. 0 1 0 dnl\textquotesingle{}\textquotesingle{}}
\CommentTok{NB.   t=. 1 pick 0 8 get n}
\CommentTok{NB.   n=. (\{."1 t) \#\textasciitilde{}  0= \#\&> \{:"1 t}
\CommentTok{NB.   d=. 1 pick 0 10 get n}
\CommentTok{NB.   c=. n ,. firstcomment\&.> 2\{"1 d}

\CommentTok{NB. char table of just comment text}
\NormalTok{comtext}\KeywordTok{=.} \DecValTok{3} \KeywordTok{\}."}\DecValTok{1}\NormalTok{ ljust onlycomments }\KeywordTok{];.}\NormalTok{\_}\DecValTok{2} \RegionMarkerTok{(}\KeywordTok{y{-}.}\NormalTok{CR}\RegionMarkerTok{)}\KeywordTok{,}\NormalTok{LF}

\CommentTok{NB. drop text below any monad and dyad marks}
\NormalTok{mask}\KeywordTok{=.} \KeywordTok{+./"}\DecValTok{1} \RegionMarkerTok{((}\KeywordTok{,:}\NormalTok{MONADMARK}\RegionMarkerTok{)} \KeywordTok{E.}\NormalTok{ comtext}\RegionMarkerTok{)} \KeywordTok{+.} \RegionMarkerTok{(}\KeywordTok{,:}\NormalTok{DYADMARK}\RegionMarkerTok{)} \KeywordTok{E.}\NormalTok{ comtext}
\NormalTok{comtext}\KeywordTok{=.} \KeywordTok{,}\StringTok{\textquotesingle{} \textquotesingle{}} \KeywordTok{,.}\NormalTok{ comtext }\KeywordTok{\#\textasciitilde{}}  \KeywordTok{{-}.} \KeywordTok{+./\textbackslash{}}\NormalTok{ mask}

\CommentTok{NB. take the first comment to end with a \textquotesingle{}.\textquotesingle{}}
\CommentTok{NB. excluding any J argument strings, eg. x. y.}
\CommentTok{NB. NIMP may not hold in j 6.01}
\NormalTok{comtext}\KeywordTok{=.}\NormalTok{ reb comtext }\KeywordTok{\{.\textasciitilde{}}\NormalTok{ firstperiod comtext}
\KeywordTok{if.} \KeywordTok{\#}\NormalTok{comtext }\KeywordTok{do.}

  \CommentTok{NB. trim scriptdoc style headers if any}
  \KeywordTok{if.} \StringTok{\textquotesingle{}*\textquotesingle{}}\KeywordTok{=\{.,}\NormalTok{comtext }\KeywordTok{do.}
\NormalTok{    alltrim }\StringTok{\textquotesingle{}{-}{-}\textquotesingle{}}\NormalTok{ afterstr comtext}
  \KeywordTok{end.}

\KeywordTok{end.}
\RegionMarkerTok{)}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{firstperiod}\AlertTok{=:}\index{firstperiod@\texttt{firstperiod}} \DecValTok{3} \RegionMarkerTok{: 0}

\CommentTok{NB.*firstperiod v{-}{-} returns the index of first sentence period.}
\CommentTok{NB. J arguments m. n. x. y. u. v. are excluded.}
\CommentTok{NB.}
\CommentTok{NB. monad:  firstperiod cl}
\CommentTok{NB.}
\CommentTok{NB.   firstperiod \textquotesingle{}not here \{m. or here [u. or here (x.) or here u. but here. Got that\textquotesingle{}}

\CommentTok{NB. mask out J arguments in at most first 500 chars}
\KeywordTok{y=.} \RegionMarkerTok{(}\DecValTok{500}\KeywordTok{<.\#y}\RegionMarkerTok{)}\KeywordTok{\{.y}
\NormalTok{args}\KeywordTok{=.} \KeywordTok{;\&.>} \KeywordTok{,} \KeywordTok{\{} \RegionMarkerTok{(}\KeywordTok{<<"}\DecValTok{0}\StringTok{\textquotesingle{} ([\{\textquotesingle{}}\RegionMarkerTok{)}\KeywordTok{,<;:}\StringTok{\textquotesingle{}m. n. x. y. u. v. *.\textquotesingle{}}
\KeywordTok{y=.}\StringTok{\textquotesingle{} \textquotesingle{}} \RegionMarkerTok{(}\KeywordTok{I.} \DecValTok{\_2}  \RegionMarkerTok{(}\KeywordTok{|.} \KeywordTok{!.} \DecValTok{0}\RegionMarkerTok{)} \KeywordTok{+./}\NormalTok{ args }\KeywordTok{E.\&>} \KeywordTok{<y}\RegionMarkerTok{)}\KeywordTok{\}} \KeywordTok{y}

\CommentTok{NB. first period after masking}
\KeywordTok{y} \KeywordTok{i.} \StringTok{\textquotesingle{}.\textquotesingle{}}
\RegionMarkerTok{)}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{NB. first document sentence}
\NormalTok{fsen}\AlertTok{=:}\index{fsen@\texttt{fsen}} \KeywordTok{]} \KeywordTok{;} \KeywordTok{[:}\NormalTok{ firstcomment disp}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{getrx}\AlertTok{=:}\index{getrx@\texttt{getrx}} \DecValTok{3} \RegionMarkerTok{: 0}

\CommentTok{NB.*getrx v{-}{-} get required to execute. (getrx) gets all the words}
\CommentTok{NB. required to execute words on (y).}
\CommentTok{NB.}
\CommentTok{NB. Warning:  if  the words listed on  (y)  refer to  object  or}
\CommentTok{NB. locale references  this verb  returns  an  error because such}
\CommentTok{NB. words generally cannot be run out of context.}
\CommentTok{NB.}
\CommentTok{NB. monad:  getrx clName | blclNames}
\CommentTok{NB.}
\CommentTok{NB.   NB. loads words into base locale}
\CommentTok{NB.   getrx \textquotesingle{}stuffineed\textquotesingle{}}
\CommentTok{NB.   getrx ;:\textquotesingle{}stuff we words need to run\textquotesingle{}}
\CommentTok{NB.}
\CommentTok{NB. dyad:  clLocale getrx clName | blclNames}
\CommentTok{NB.}
\CommentTok{NB.   \textquotesingle{}targetlocale\textquotesingle{} getrx ;:\textquotesingle{}load the stuff we need into locale\textquotesingle{}}

\StringTok{\textquotesingle{}base\textquotesingle{}}\NormalTok{ getrx }\KeywordTok{y}
\KeywordTok{:}
\KeywordTok{if.}\NormalTok{ badrc uv0}\KeywordTok{=.} \DecValTok{31}\NormalTok{ uses }\KeywordTok{y} \KeywordTok{do.}\NormalTok{ uv0}
\CommentTok{NB. errmsg: words refer to objects/locales}
\KeywordTok{elseif.} \KeywordTok{\#}\NormalTok{uv1}\KeywordTok{=.}\NormalTok{ obnames uv0 }\KeywordTok{do.} \RegionMarkerTok{(}\NormalTok{jderr ERR00405}\RegionMarkerTok{)}\KeywordTok{,}\NormalTok{uv1}
\KeywordTok{elseif.}\NormalTok{ uv0}\KeywordTok{=.\textasciitilde{}.}\RegionMarkerTok{(}\KeywordTok{\{."}\DecValTok{1} \KeywordTok{>\{:}\NormalTok{uv0}\RegionMarkerTok{)}\KeywordTok{,}\NormalTok{refnames uv0}
\NormalTok{        badrc uv1}\KeywordTok{=.} \KeywordTok{x}\NormalTok{ get uv0 }\KeywordTok{do.}\NormalTok{ uv1}
\KeywordTok{elseif.do.}
\NormalTok{  ok }\StringTok{\textquotesingle{}(\textquotesingle{}}\KeywordTok{,}\RegionMarkerTok{(}\KeywordTok{":\#}\NormalTok{uv0}\RegionMarkerTok{)}\KeywordTok{,}\NormalTok{OK00406}\KeywordTok{,x}
\KeywordTok{end.}
\RegionMarkerTok{)}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{hlpnl}\AlertTok{=:}\index{hlpnl@\texttt{hlpnl}} \DecValTok{3} \RegionMarkerTok{: 0}

\CommentTok{NB.*hlpnl v{-}{-} displays short descriptions of objects on (y)}
\CommentTok{NB.}
\CommentTok{NB. monad:  hlpnl clName | blclNames}
\CommentTok{NB.}
\CommentTok{NB.   hlpnl refnames uses \textquotesingle{}explainmycalls\textquotesingle{}}
\CommentTok{NB.}
\CommentTok{NB. dyad:  iaObject hlpnl clName|blclNames}
\CommentTok{NB.}
\CommentTok{NB.   2 hlpnl \}.grp\textquotesingle{}\textquotesingle{}}

\DecValTok{0}\NormalTok{ hlpnl }\KeywordTok{y}
\KeywordTok{:}
\KeywordTok{if.}\NormalTok{ empdnl }\KeywordTok{y} \KeywordTok{do.}\NormalTok{ ok }\StringTok{\textquotesingle{}\textquotesingle{}}
\KeywordTok{elseif.} \DecValTok{0}\KeywordTok{=>\{.}\NormalTok{uv0}\KeywordTok{=.} \RegionMarkerTok{(}\KeywordTok{x,}\NormalTok{EXPLAIN}\RegionMarkerTok{)}\NormalTok{ get }\KeywordTok{y} \KeywordTok{do.}\NormalTok{ uv0}
\KeywordTok{elseif.do.}
\NormalTok{  uv0}\KeywordTok{=.>\{:}\NormalTok{uv0}
  \RegionMarkerTok{(}\KeywordTok{>\{."}\DecValTok{1}\NormalTok{ uv0}\RegionMarkerTok{)} \KeywordTok{;} \KeywordTok{>\{:"}\DecValTok{1}\NormalTok{ uv0}
\KeywordTok{end.}
\RegionMarkerTok{)}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{jodage}\AlertTok{=:}\index{jodage@\texttt{jodage}} \DecValTok{3} \RegionMarkerTok{: 0}

\CommentTok{NB.*jodage  v{-}{-}  days  since  last  change  and creation  of  JOD}
\CommentTok{NB. objects.}
\CommentTok{NB.}
\CommentTok{NB. monad:  jodage cl | blcl}
\CommentTok{NB.}
\CommentTok{NB.   jodage \textquotesingle{}jodage\textquotesingle{}}
\CommentTok{NB.   jodage \}. dnl \textquotesingle{}re\textquotesingle{}}
\CommentTok{NB.}
\CommentTok{NB. dyad:  iaCode jodage cl | blcl}
\CommentTok{NB.}
\CommentTok{NB.   2 jodage \}. grp\textquotesingle{}\textquotesingle{}}

\DecValTok{0}\NormalTok{ jodage }\KeywordTok{y}
\KeywordTok{:}
\KeywordTok{if.}\NormalTok{ badil }\KeywordTok{x} \KeywordTok{do.}\NormalTok{ jderr ERR001}
\KeywordTok{elseif.} \KeywordTok{y=.} \KeywordTok{,}\NormalTok{boxopen }\KeywordTok{y}
\NormalTok{        badrc changed}\KeywordTok{=.} \RegionMarkerTok{((}\KeywordTok{\{.x}\RegionMarkerTok{)}\KeywordTok{,}\DecValTok{14}\RegionMarkerTok{)}\NormalTok{ get }\KeywordTok{y} \KeywordTok{do.}\NormalTok{ changed}
\KeywordTok{elseif.}\NormalTok{ badrc created}\KeywordTok{=.} \RegionMarkerTok{((}\KeywordTok{\{.x}\RegionMarkerTok{)}\KeywordTok{,}\DecValTok{13}\RegionMarkerTok{)}\NormalTok{ get }\KeywordTok{y} \KeywordTok{do.}\NormalTok{ created}
\KeywordTok{elseif.do.}
\NormalTok{  g}\KeywordTok{=.} \KeywordTok{/:}\NormalTok{daychanged}\KeywordTok{=.} \KeywordTok{<.,.}\DecValTok{1}\NormalTok{ dayage }\KeywordTok{<.}\NormalTok{changed}\KeywordTok{=.}\NormalTok{ rv changed}
\NormalTok{  daycreated}\KeywordTok{=.} \KeywordTok{,.<.}\DecValTok{1}\NormalTok{ dayage }\KeywordTok{<.}\NormalTok{created}\KeywordTok{=.}\NormalTok{ rv created}
  \CommentTok{NB. header=. ;:\textquotesingle{}name changed created datechanged datecreated\textquotesingle{}}
\NormalTok{  header}\KeywordTok{=.}\NormalTok{ AGEHEADER}
  \CommentTok{NB. header ,: (<g) \{\&.> (>y);daychanged;daycreated;(,.changed);<,.created}
\NormalTok{  ok}\KeywordTok{<}\NormalTok{header }\KeywordTok{,:} \RegionMarkerTok{(}\KeywordTok{<}\NormalTok{g}\RegionMarkerTok{)} \KeywordTok{\{\&.>} \RegionMarkerTok{(}\KeywordTok{>y}\RegionMarkerTok{)}\KeywordTok{;}\RegionMarkerTok{(}\KeywordTok{,.}\NormalTok{created}\RegionMarkerTok{)}\KeywordTok{;}\NormalTok{daycreated}\KeywordTok{;}\RegionMarkerTok{(}\KeywordTok{,.}\NormalTok{changed}\RegionMarkerTok{)}\KeywordTok{;<}\NormalTok{daychanged}
\KeywordTok{end.}
\RegionMarkerTok{)}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{lg}\AlertTok{=:}\index{lg@\texttt{lg}} \DecValTok{3} \RegionMarkerTok{: 0}

\CommentTok{NB.*lg v{-}{-} make and load JOD group.}
\CommentTok{NB.}
\CommentTok{NB. (lg) assembles and loads  JOD group  scripts. The monad loads}
\CommentTok{NB. without  the  postprocessor  and  the  dyad  loads  with  the}
\CommentTok{NB. postprocessor.}
\CommentTok{NB.}
\CommentTok{NB. monad:  lg clGroup}
\CommentTok{NB.}
\CommentTok{NB.   lg \textquotesingle{}groupname\textquotesingle{}  NB. no postprocessor}
\CommentTok{NB.}
\CommentTok{NB. dyad:  uu lg clGroup}
\CommentTok{NB.}
\CommentTok{NB.   2 lg \textquotesingle{}group\textquotesingle{}    NB. no postprocessor}
\CommentTok{NB.   lg\textasciitilde{}  \textquotesingle{}group\textquotesingle{}    NB. postprocessor}

\CommentTok{NB. (/:)=: obfuscate names}
\DecValTok{2}\NormalTok{ lg }\KeywordTok{y}
\KeywordTok{:}
\KeywordTok{if.} \KeywordTok{x{-}:}\DecValTok{2} \KeywordTok{do.}
  \CommentTok{NB. 2 \_2 make assembles entire group script}
  \CommentTok{NB. with preamble regardless of where the}
  \CommentTok{NB. group appears on the JOD path}
\NormalTok{  msg}\KeywordTok{=.}\NormalTok{ OK00404 }\CommentTok{NB. okmsg: group loaded}
\NormalTok{  t}\KeywordTok{=.} \DecValTok{2} \DecValTok{\_2}\NormalTok{ make }\KeywordTok{y}
\KeywordTok{else.}
\NormalTok{  msg}\KeywordTok{=.}\NormalTok{ OK00405 }\CommentTok{NB. okmsg: group loaded with postprocessor}
\NormalTok{  t}\KeywordTok{=.} \DecValTok{2}\NormalTok{ mls }\KeywordTok{y}
\KeywordTok{end.}
\StringTok{\textquotesingle{}r s\textquotesingle{}}\KeywordTok{=.} \DecValTok{2}\KeywordTok{\{.}\NormalTok{t}
\CommentTok{NB. j profile !(*)=. cocurrent}
\KeywordTok{if.}\NormalTok{ r }\KeywordTok{do.}
\NormalTok{  curr}\KeywordTok{=.} \DecValTok{18}\KeywordTok{!:}\DecValTok{5} \StringTok{\textquotesingle{}\textquotesingle{}}   \CommentTok{NB. current locale}
\NormalTok{  cocurrent }\StringTok{\textquotesingle{}base\textquotesingle{}}  \CommentTok{NB. run script from base}
  \KeywordTok{try.} \DecValTok{0}\KeywordTok{!:}\DecValTok{0}\NormalTok{ s}
  \KeywordTok{catchd.}
\NormalTok{    cocurrent curr  }\CommentTok{NB. restore locale}
    \CommentTok{NB. errmsg: J script error in group}
    \RegionMarkerTok{(}\NormalTok{jderr ERR00404}\RegionMarkerTok{)}\KeywordTok{,y;}\DecValTok{13}\KeywordTok{!:}\DecValTok{12} \StringTok{\textquotesingle{}\textquotesingle{}}
    \KeywordTok{return.}
  \KeywordTok{end.}
\NormalTok{  cocurrent curr    }\CommentTok{NB. restore locale}
\NormalTok{  ok }\RegionMarkerTok{(}\KeywordTok{y}\RegionMarkerTok{)}\KeywordTok{,}\NormalTok{msg}
\KeywordTok{else.}
\NormalTok{  t}
\KeywordTok{end.}
\RegionMarkerTok{)}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{locgrp}\AlertTok{=:}\index{locgrp@\texttt{locgrp}} \DecValTok{3} \RegionMarkerTok{: 0}

\CommentTok{NB.*locgrp v{-}{-} list groups and suites with name.}
\CommentTok{NB.}
\CommentTok{NB. monad:  locgrp clName}
\CommentTok{NB.}
\CommentTok{NB.   locgrp \textquotesingle{}dd\textquotesingle{}}

\CommentTok{NB. get group and suite names}
\NormalTok{gs}\KeywordTok{=.} \DecValTok{2} \DecValTok{3}\NormalTok{ dnl}\KeywordTok{\&.>} \KeywordTok{<}\StringTok{\textquotesingle{}\textquotesingle{}}
\KeywordTok{if.} \KeywordTok{*./} \KeywordTok{m=.} \KeywordTok{;} \KeywordTok{\{.\&>}\NormalTok{ gs }\KeywordTok{do.}
\NormalTok{  gs}\KeywordTok{=.} \KeywordTok{\}.\&.>}\NormalTok{ gs}
\NormalTok{  gnl}\KeywordTok{=.} \DecValTok{2} \DecValTok{3} \KeywordTok{\}.@:}\NormalTok{grp }\KeywordTok{\&.>} \KeywordTok{\&.>}\NormalTok{ gs}
  \KeywordTok{m=.}\NormalTok{ gnl }\RegionMarkerTok{(}\KeywordTok{+./@:e.}\RegionMarkerTok{)}\KeywordTok{\&>\&.>} \KeywordTok{<<<,y}
\NormalTok{  ok }\KeywordTok{<}\NormalTok{GROUPSUITES }\KeywordTok{,.} \KeywordTok{m\#\&.>}\NormalTok{ gs}
\KeywordTok{else.}
  \KeywordTok{>\{.} \RegionMarkerTok{(}\KeywordTok{{-}.m}\RegionMarkerTok{)} \KeywordTok{\#} \KeywordTok{\&.>}\NormalTok{ gs}
\KeywordTok{end.}
\RegionMarkerTok{)}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{mls}\AlertTok{=:}\index{mls@\texttt{mls}} \DecValTok{3} \RegionMarkerTok{: 0}

\CommentTok{NB.*mls v{-}{-} make load script.}
\CommentTok{NB.}
\CommentTok{NB. Generates a J (load) script from a JOD group and  an optional}
\CommentTok{NB. POST\_ process macro script.}
\CommentTok{NB.}
\CommentTok{NB. monad:  mls clGroupName}
\CommentTok{NB.}
\CommentTok{NB.   NB. generate script and add to public scripts}
\CommentTok{NB.   mls \textquotesingle{}JODaddon\textquotesingle{}}
\CommentTok{NB.}
\CommentTok{NB.   scripts \textquotesingle{}e\textquotesingle{}       NB. JODaddon is now on scripts}
\CommentTok{NB.   load \textquotesingle{}JODaddon\textquotesingle{}   NB. load\textquotesingle{}s like any J load script}
\CommentTok{NB.}
\CommentTok{NB. dyad:  baPublic mls clGroupName}
\CommentTok{NB.}
\CommentTok{NB.   NB. make script but do not add to public scripts}
\CommentTok{NB.   0 mls \textquotesingle{}JODaddon\textquotesingle{}}
\CommentTok{NB.}
\CommentTok{NB.   NB. make script and return text}
\CommentTok{NB.   2 mls \textquotesingle{}JODaddon\textquotesingle{}}

\DecValTok{1}\NormalTok{ mls }\KeywordTok{y}
\KeywordTok{:}

\CommentTok{NB. HARDCODE: option qualifier codes}
\CommentTok{NB. 2 \_2 make assembles entire group script}
\CommentTok{NB. with preamble regardless of where the}
\CommentTok{NB. group appears on the JOD path}
\KeywordTok{v=.} \DecValTok{2} \DecValTok{\_2}\NormalTok{ make gn}\KeywordTok{=.} \KeywordTok{y} \KeywordTok{{-}.} \StringTok{\textquotesingle{} \textquotesingle{}}
\StringTok{\textquotesingle{}r s\textquotesingle{}}\KeywordTok{=.} \DecValTok{2}\KeywordTok{\{.v}
\KeywordTok{if.}\NormalTok{ r }\KeywordTok{do.}
  \CommentTok{NB. group make succeeded {-} append any POST\_ script}
\NormalTok{  postpfx}\KeywordTok{=.}\NormalTok{ POSTAMBLEPFX}
  \KeywordTok{if.}\NormalTok{ badrc sp}\KeywordTok{=.} \DecValTok{4}\NormalTok{ dnl postpfx }\KeywordTok{do.}\NormalTok{ sp }\KeywordTok{return.} \KeywordTok{end.}
  \KeywordTok{if.} \RegionMarkerTok{(}\KeywordTok{<}\NormalTok{ps}\KeywordTok{=.}\NormalTok{ postpfx }\KeywordTok{,}\NormalTok{ gn}\RegionMarkerTok{)} \KeywordTok{e.} \KeywordTok{\}.}\NormalTok{sp }\KeywordTok{do.}
    \KeywordTok{v=.} \DecValTok{4}\NormalTok{ get ps}
    \StringTok{\textquotesingle{}r p\textquotesingle{}}\KeywordTok{=.} \DecValTok{2}\KeywordTok{\{.v}
    \KeywordTok{if.}\NormalTok{ r }\KeywordTok{do.}\NormalTok{ s}\KeywordTok{=.}\NormalTok{ s }\KeywordTok{,} \RegionMarkerTok{(}\DecValTok{2}\KeywordTok{\#}\NormalTok{LF}\RegionMarkerTok{)} \KeywordTok{,} \RegionMarkerTok{(}\KeywordTok{<}\DecValTok{0}\KeywordTok{;}\DecValTok{2}\RegionMarkerTok{)} \KeywordTok{\{::}\NormalTok{ p }\KeywordTok{else.} \KeywordTok{v} \KeywordTok{return.} \KeywordTok{end.}
  \KeywordTok{end.}
  \KeywordTok{if.} \DecValTok{2}\KeywordTok{{-}:x} \KeywordTok{do.}\NormalTok{ ok s}
  \KeywordTok{else.}
\NormalTok{    pdo}\KeywordTok{=.} \KeywordTok{\{:}\DecValTok{0}\KeywordTok{\{}\NormalTok{DPATH}\DecValTok{\_\_}\NormalTok{ST}\DecValTok{\_\_}\NormalTok{JODobj   }\CommentTok{NB. put dictionary directory object}
\NormalTok{    rf}\KeywordTok{=.}\NormalTok{ gf}\KeywordTok{=.}\NormalTok{ SCR\_\_pdo            }\CommentTok{NB. default directory}

    \CommentTok{NB. redirect script output if ROOTFOLDER exists and is configured {-} standard profile !(*)=. jpath}
    \KeywordTok{if.}\NormalTok{ wex }\KeywordTok{<}\StringTok{\textquotesingle{}ROOTFOLDER\_\_pdo\textquotesingle{}} \KeywordTok{do.}
      \CommentTok{NB. errmsg: ROOTFOLDER must be a character list configured (jpath) expression like: \textasciitilde{}user/jodroot}
      \KeywordTok{if.}\NormalTok{ badcl ROOTFOLDER\_\_pdo }\KeywordTok{do.}\NormalTok{ jderr ERR00407 }\KeywordTok{return.} \KeywordTok{end.}
      \KeywordTok{if.} \DecValTok{0} \KeywordTok{<} \KeywordTok{\#}\NormalTok{rf}\KeywordTok{=.}\NormalTok{ alltrim ROOTFOLDER\_\_pdo }\KeywordTok{do.}
        \KeywordTok{if.} \StringTok{\textquotesingle{}\textasciitilde{}\textquotesingle{}} \KeywordTok{\textasciitilde{}:} \KeywordTok{\{.}\NormalTok{ rf }\KeywordTok{do.}\NormalTok{ jderr ERR00407 }\KeywordTok{return.} \KeywordTok{end.}
        \CommentTok{NB. do not expand relative path strings {-} relative paths must be configured}
        \KeywordTok{if.}\NormalTok{ rf }\KeywordTok{{-}:}\NormalTok{ gt}\KeywordTok{=.}\NormalTok{ jpath rf }\KeywordTok{do.}\NormalTok{ jderr ERR00407 }\KeywordTok{return.} \KeywordTok{else.}\NormalTok{ gf}\KeywordTok{=.}\NormalTok{ tslash2 gt }\KeywordTok{end.}
\NormalTok{        rf}\KeywordTok{=.}\NormalTok{ tslash2 rf}
      \KeywordTok{else.}
\NormalTok{        rf}\KeywordTok{=.}\NormalTok{ gf}
      \KeywordTok{end.}
    \KeywordTok{end.}

\NormalTok{    lsn}\KeywordTok{=.}\NormalTok{ gf}\KeywordTok{,}\NormalTok{gn}\KeywordTok{,}\NormalTok{IJS}\DecValTok{\_\_}\NormalTok{JODobj  }\CommentTok{NB. errmsg: unable to write load script}
    \KeywordTok{if.} \DecValTok{\_1} \KeywordTok{{-}:} \RegionMarkerTok{(}\NormalTok{toHOST s}\RegionMarkerTok{)} \RegionMarkerTok{(}\NormalTok{write }\KeywordTok{::} \KeywordTok{\_1:}\RegionMarkerTok{)}\NormalTok{ lsn }\KeywordTok{do.} \RegionMarkerTok{(}\NormalTok{jderr ERR00408}\RegionMarkerTok{)}\KeywordTok{,<}\NormalTok{lsn }\KeywordTok{return.} \KeywordTok{end.}
    \CommentTok{NB. update scripts.ijs}
    \KeywordTok{x}\NormalTok{ addloadscript gn}\KeywordTok{;}\NormalTok{rf}\KeywordTok{,}\NormalTok{gn}

  \KeywordTok{end.}
\KeywordTok{else.}
  \KeywordTok{v}
\KeywordTok{end.}
\RegionMarkerTok{)}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{noexp}\AlertTok{=:}\index{noexp@\texttt{noexp}} \DecValTok{3} \RegionMarkerTok{: 0}

\CommentTok{NB.*noexp v{-}{-} returns a list of objects with no explanations.}
\CommentTok{NB.}
\CommentTok{NB. monad:  noexp zl|clPattern}
\CommentTok{NB.}
\CommentTok{NB.   noexp \textquotesingle{}\textquotesingle{}  NB. words without short explanations}
\CommentTok{NB.}
\CommentTok{NB. dyad:  iaCode noexp zl | clPattern}
\CommentTok{NB.}
\CommentTok{NB.   2 noexp \textquotesingle{}jod\textquotesingle{}       NB. groups without explanations}
\CommentTok{NB.   (i.5) noexp"0 1 \textquotesingle{}\textquotesingle{}  NB. all objects without explanations}

\DecValTok{0}\NormalTok{ noexp }\KeywordTok{y}
\KeywordTok{:}
\KeywordTok{if.}\NormalTok{ badrc uv}\KeywordTok{=.x}\NormalTok{ dnl }\KeywordTok{y} \KeywordTok{do.}\NormalTok{ uv}
\KeywordTok{elseif.} \KeywordTok{a:} \KeywordTok{e.}\NormalTok{ uv       }\KeywordTok{do.}\NormalTok{ ok }\StringTok{\textquotesingle{}\textquotesingle{}}
\KeywordTok{elseif.}\NormalTok{ badrc uv}\KeywordTok{=.} \RegionMarkerTok{((}\KeywordTok{\{.x}\RegionMarkerTok{)}\KeywordTok{,}\NormalTok{EXPLAIN}\RegionMarkerTok{)}\NormalTok{ get }\KeywordTok{\}.}\NormalTok{uv }\KeywordTok{do.}\NormalTok{ uv}
\KeywordTok{elseif.} \DecValTok{0}\KeywordTok{=\#}\NormalTok{uv}\KeywordTok{=.}\NormalTok{ rv uv  }\KeywordTok{do.}\NormalTok{ ok}\StringTok{\textquotesingle{}\textquotesingle{}}
\KeywordTok{elseif.do.}
\NormalTok{ ok }\RegionMarkerTok{(}\DecValTok{0} \KeywordTok{=} \KeywordTok{\#\&>} \KeywordTok{\{:"}\DecValTok{1}\NormalTok{ uv}\RegionMarkerTok{)} \KeywordTok{\#} \KeywordTok{\{."}\DecValTok{1}\NormalTok{ uv}
\KeywordTok{end.}
\RegionMarkerTok{)}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{notgrp}\AlertTok{=:}\index{notgrp@\texttt{notgrp}} \DecValTok{3} \RegionMarkerTok{: 0}

\CommentTok{NB.*notgrp v{-}{-} words or tests from (y) that are not in groups or}
\CommentTok{NB. suites. Useful for finding loose ends and dead code.}
\CommentTok{NB.}
\CommentTok{NB. monad:  notgrp blcl}
\CommentTok{NB.}
\CommentTok{NB.   notgrp \}. revo \textquotesingle{}\textquotesingle{}     NB. recent ungrouped words}
\CommentTok{NB.}
\CommentTok{NB. dyad:  iaObject notgrp blcl}
\CommentTok{NB.}
\CommentTok{NB.   2 notgrp \}. dnl \textquotesingle{}\textquotesingle{}    NB. ungrouped words}
\CommentTok{NB.   3 notgrp \}. 1 dnl \textquotesingle{}\textquotesingle{}  NB. tests that are not in suites}

\NormalTok{GROUP notgrp }\KeywordTok{y}
\KeywordTok{:}
\KeywordTok{if.}\NormalTok{ badrc }\KeywordTok{y=.}\NormalTok{ checknames }\KeywordTok{y} \KeywordTok{do.} \KeywordTok{y} \KeywordTok{return.} \KeywordTok{end.}
\KeywordTok{y=.} \KeywordTok{\}.} \KeywordTok{y}
\KeywordTok{select.} \KeywordTok{x}
  \KeywordTok{case.}\NormalTok{ GROUP }\KeywordTok{do.}\NormalTok{ ok }\KeywordTok{y} \KeywordTok{{-}.} \KeywordTok{;}\NormalTok{ grp}\KeywordTok{\&.>} \KeywordTok{\}.}\NormalTok{ GROUP dnl }\StringTok{\textquotesingle{}\textquotesingle{}}
  \KeywordTok{case.}\NormalTok{ SUITE }\KeywordTok{do.}\NormalTok{ ok }\KeywordTok{y} \KeywordTok{{-}.} \KeywordTok{;}\NormalTok{ SUITE grp}\KeywordTok{\&.>} \KeywordTok{\}.}\NormalTok{ SUITE dnl }\StringTok{\textquotesingle{}\textquotesingle{}}
  \KeywordTok{case.do.}\NormalTok{ jderr ERR001}
\KeywordTok{end.}
\RegionMarkerTok{)}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{nt}\AlertTok{=:}\index{nt@\texttt{nt}} \DecValTok{3} \RegionMarkerTok{: 0}

\CommentTok{NB.*nt v{-}{-} edit a new test script using JOD conventions.}
\CommentTok{NB.}
\CommentTok{NB. This  verb  looks   for  (TESTSTUB)  on  the  path   of  open}
\CommentTok{NB. dictionaries allowing easy user defined test script formats.}
\CommentTok{NB.}
\CommentTok{NB. monad:  nt clName}
\CommentTok{NB.}
\CommentTok{NB.   nt \textquotesingle{}scriptname\textquotesingle{}}
\CommentTok{NB.}
\CommentTok{NB. dyad:  clSreps nt clName}
\CommentTok{NB.}
\CommentTok{NB.   NB. the dyad allows more general string}
\CommentTok{NB.   NB. replacements to be applied to stubs}
\CommentTok{NB.}
\CommentTok{NB.   \textquotesingle{}\#\{\{boo\}\}\#<<newboo>>\#\{\{hoo\}\}\#??newhoo??\textquotesingle{} nt \textquotesingle{}newscript\textquotesingle{}}

\StringTok{\textquotesingle{}\textquotesingle{}}\NormalTok{ nt }\KeywordTok{y}
\KeywordTok{:}
\KeywordTok{if.}\NormalTok{ badcl }\KeywordTok{y} \KeywordTok{do.}\NormalTok{ jderr ERR002 }\KeywordTok{return.} \KeywordTok{end.} \CommentTok{NB. errmsg: invalid name(s)}
\KeywordTok{if.}\NormalTok{ badcl }\KeywordTok{x} \KeywordTok{do.}\NormalTok{ jderr ERR001 }\KeywordTok{return.} \KeywordTok{end.} \CommentTok{NB. errmsg: invalid option(s)}
\NormalTok{name}\KeywordTok{=.} \KeywordTok{y} \KeywordTok{{-}.} \StringTok{\textquotesingle{} \textquotesingle{}} \KeywordTok{[}\NormalTok{ dl}\KeywordTok{=.} \KeywordTok{\{.} \KeywordTok{x,}\StringTok{\textquotesingle{}/\textquotesingle{}}

\CommentTok{NB. HARDCODE: invalid delimiters}
\KeywordTok{if.}\NormalTok{ dl }\KeywordTok{e.} \StringTok{\textquotesingle{}\{\}\textasciitilde{}ADST\textquotesingle{}} \KeywordTok{do.}\NormalTok{ jderr ERR00406 }\KeywordTok{return.} \KeywordTok{end.} \CommentTok{NB. errmsg: invalid delimiter}

\CommentTok{NB. get teststub document from open dictionaries}
\StringTok{\textquotesingle{}r s\textquotesingle{}}\KeywordTok{=.}\DecValTok{2}\KeywordTok{\{.}\NormalTok{t}\KeywordTok{=.} \DecValTok{1}\NormalTok{ get TESTSTUB}
\KeywordTok{if.}\NormalTok{ r }\KeywordTok{do.}
  \StringTok{\textquotesingle{}datess timess\textquotesingle{}}\KeywordTok{=.}\NormalTok{yyyymondd }\DecValTok{0}
\NormalTok{  shortdate}\KeywordTok{=.} \DecValTok{2} \KeywordTok{\}.}\NormalTok{ datess}
\NormalTok{  test}\KeywordTok{=.}\NormalTok{ dl}\KeywordTok{,}\StringTok{\textquotesingle{}\{\textasciitilde{}T\textasciitilde{}\}\textquotesingle{}}\KeywordTok{,}\NormalTok{dl}\KeywordTok{,}\NormalTok{name}\KeywordTok{,}\NormalTok{dl}\KeywordTok{,}\StringTok{\textquotesingle{}\{\textasciitilde{}D\textasciitilde{}\}\textquotesingle{}}\KeywordTok{,}\NormalTok{dl}\KeywordTok{,}\NormalTok{datess}\KeywordTok{,}\NormalTok{dl}\KeywordTok{,}\StringTok{\textquotesingle{}\{\textasciitilde{}SD\textasciitilde{}\}\textquotesingle{}}\KeywordTok{,}\NormalTok{dl}\KeywordTok{,}\NormalTok{shortdate}
  \CommentTok{NB. insert any visible cl !(*)=. CLASSAUTHOR}
  \CommentTok{NB. NOTE: nouns in locale (ijod) are visible here}
  \KeywordTok{if.}\NormalTok{ wex }\KeywordTok{<}\StringTok{\textquotesingle{}CLASSAUTHOR\textquotesingle{}} \KeywordTok{do.}
    \CommentTok{NB. (CLASSAUTHOR) is a cl without (dl)}
    \KeywordTok{if.} \RegionMarkerTok{(}\KeywordTok{{-}.}\NormalTok{badcl CLASSAUTHOR}\RegionMarkerTok{)} \KeywordTok{*.} \KeywordTok{{-}.}\NormalTok{dl }\KeywordTok{e.}\NormalTok{ CLASSAUTHOR }\KeywordTok{do.}\NormalTok{ test}\KeywordTok{=.}\NormalTok{ test}\KeywordTok{,}\NormalTok{dl}\KeywordTok{,}\StringTok{\textquotesingle{}\{\textasciitilde{}A\textasciitilde{}\}\textquotesingle{}}\KeywordTok{,}\NormalTok{dl}\KeywordTok{,}\NormalTok{CLASSAUTHOR }\KeywordTok{end.}
  \KeywordTok{end.}
\NormalTok{  name et }\RegionMarkerTok{(}\NormalTok{test}\KeywordTok{,x}\RegionMarkerTok{)}\NormalTok{ changestr }\KeywordTok{>}\DecValTok{1}\KeywordTok{\{,}\NormalTok{s}
\KeywordTok{else.}
\NormalTok{  t}
\KeywordTok{end.}
\RegionMarkerTok{)}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{nw}\AlertTok{=:}\index{nw@\texttt{nw}} \DecValTok{3} \RegionMarkerTok{: 0}

\CommentTok{NB.*nw v{-}{-} edit a new explicit word using JOD conventions.}
\CommentTok{NB.}
\CommentTok{NB. monad:  nw clWord}
\CommentTok{NB.}
\CommentTok{NB.   nw \textquotesingle{}verb\textquotesingle{}}
\CommentTok{NB.}
\CommentTok{NB. dyad:  iaClass nw clWord}
\CommentTok{NB.}
\CommentTok{NB.   1 nw \textquotesingle{}adverb\textquotesingle{}}

\DecValTok{3}\NormalTok{ nw }\KeywordTok{y}
\KeywordTok{:}
\NormalTok{name}\KeywordTok{=.} \KeywordTok{y} \KeywordTok{{-}.} \StringTok{\textquotesingle{} \textquotesingle{}}
\KeywordTok{if.} \KeywordTok{{-}.x} \KeywordTok{e.} \KeywordTok{i.} \DecValTok{5} \KeywordTok{do.} \KeywordTok{x=.}\DecValTok{3} \KeywordTok{end.}
\NormalTok{class}\KeywordTok{=.} \KeywordTok{x\{}\StringTok{\textquotesingle{}nacvv\textquotesingle{}}

\CommentTok{NB. user defined post proc !(*)=. DOCUMENTCOMMAND}
\KeywordTok{if.} \DecValTok{0}\KeywordTok{=} \RegionMarkerTok{(}\DecValTok{4}\KeywordTok{!:}\DecValTok{0}\RegionMarkerTok{)} \KeywordTok{<}\StringTok{\textquotesingle{}DOCUMENTCOMMAND\textquotesingle{}} \KeywordTok{do.}
\NormalTok{  word}\KeywordTok{=.}\NormalTok{DOCUMENTMARK}\KeywordTok{,}\NormalTok{LF}\KeywordTok{,}\NormalTok{LF}\KeywordTok{,}\NormalTok{DOCUMENTCOMMAND}
\KeywordTok{else.}
\NormalTok{  word}\KeywordTok{=.}\NormalTok{DOCUMENTMARK}
\KeywordTok{end.}

\NormalTok{reps}\KeywordTok{=.} \StringTok{\textquotesingle{}/\{\textasciitilde{}N\textasciitilde{}\}/\textquotesingle{}}\KeywordTok{,}\RegionMarkerTok{(}\KeywordTok{y{-}.}\StringTok{\textquotesingle{} \textquotesingle{}}\RegionMarkerTok{)}\KeywordTok{,}\StringTok{\textquotesingle{}/\{\textasciitilde{}C\textasciitilde{}\}/\textquotesingle{}}\KeywordTok{,}\RegionMarkerTok{(}\KeywordTok{":x}\RegionMarkerTok{)}\KeywordTok{,}\StringTok{\textquotesingle{}/\{\textasciitilde{}T\textasciitilde{}\}/\textquotesingle{}}\KeywordTok{,}\NormalTok{class}
\NormalTok{word}\KeywordTok{=.}\NormalTok{ reps changestr word}
\NormalTok{name et word}
\RegionMarkerTok{)}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{NB. object/locale names from uses:  allnames 31 uses \textquotesingle{}name\textquotesingle{}}
\NormalTok{obnames}\AlertTok{=:}\index{obnames@\texttt{obnames}} \KeywordTok{[:} \KeywordTok{/:\textasciitilde{}} \KeywordTok{[:} \KeywordTok{\textasciitilde{}.} \KeywordTok{[:} \KeywordTok{;} \KeywordTok{2:} \KeywordTok{\{"}\DecValTok{1} \KeywordTok{[:} \KeywordTok{>} \KeywordTok{\{:}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{onlycomments}\AlertTok{=:}\index{onlycomments@\texttt{onlycomments}} \DecValTok{3} \RegionMarkerTok{: 0}

\CommentTok{NB.*onlycomments v{-}{-} removes all J code leaving comments.}
\CommentTok{NB.}
\CommentTok{NB. monad:  ct =. onlycomments ctJcode}
\CommentTok{NB.}
\CommentTok{NB.   onlycomments jcr \textquotesingle{}onlycomments\textquotesingle{}  NB. self comments}

\CommentTok{NB. mask of unquoted comment starts}
\NormalTok{c }\KeywordTok{=.} \RegionMarkerTok{(}\KeywordTok{$y}\RegionMarkerTok{)}\KeywordTok{$}\StringTok{\textquotesingle{}NB.\textquotesingle{}} \KeywordTok{E.} \KeywordTok{,y}
\NormalTok{c }\KeywordTok{=.} \KeywordTok{{-}.} \KeywordTok{+./\textbackslash{}"}\DecValTok{1}\NormalTok{ c }\KeywordTok{>} \KeywordTok{\textasciitilde{}:/\textbackslash{}"}\DecValTok{1} \KeywordTok{y} \KeywordTok{e.} \StringTok{\textquotesingle{}\textquotesingle{}\textquotesingle{}\textquotesingle{}}
\KeywordTok{y} \KeywordTok{=.} \KeywordTok{,y}

\CommentTok{NB. blank out code}
\KeywordTok{y} \KeywordTok{=.} \StringTok{\textquotesingle{} \textquotesingle{}} \RegionMarkerTok{((}\KeywordTok{,}\NormalTok{c}\RegionMarkerTok{)}\KeywordTok{\#} \KeywordTok{i.} \KeywordTok{\#} \KeywordTok{y}\RegionMarkerTok{)}\KeywordTok{\}} \KeywordTok{y}
\KeywordTok{y} \KeywordTok{=.} \KeywordTok{y} \KeywordTok{$\textasciitilde{}} \KeywordTok{$}\NormalTok{c}
\KeywordTok{y} \KeywordTok{\#\textasciitilde{}} \KeywordTok{y} \KeywordTok{+./} \KeywordTok{.} \KeywordTok{\textasciitilde{}:} \StringTok{\textquotesingle{} \textquotesingle{}}  \CommentTok{NB. remove blank rows}
\RegionMarkerTok{)}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{NB. put and cross reference word}
\NormalTok{pr}\AlertTok{=:}\index{pr@\texttt{pr}} \DecValTok{0}\KeywordTok{\&}\NormalTok{globs }\KeywordTok{,:\textasciitilde{}}\NormalTok{ put}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{NB. referenced nonlocale names from uses:  allnames 31 uses \textquotesingle{}name\textquotesingle{}}
\NormalTok{refnames}\AlertTok{=:}\index{refnames@\texttt{refnames}} \KeywordTok{[:} \KeywordTok{/:\textasciitilde{}} \KeywordTok{[:} \KeywordTok{\textasciitilde{}.} \KeywordTok{[:} \KeywordTok{;} \KeywordTok{1:} \KeywordTok{\{"}\DecValTok{1} \KeywordTok{[:} \KeywordTok{>} \KeywordTok{\{:}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{revonex}\AlertTok{=:}\index{revonex@\texttt{revonex}} \DecValTok{3} \RegionMarkerTok{: 0}

\CommentTok{NB.*revonex v{-}{-} returns a  list of put dictionary objects with no}
\CommentTok{NB. explanations.}
\CommentTok{NB.}
\CommentTok{NB. This verb is  similiar to (noexp) except it only searches put}
\CommentTok{NB. dictionary objects and (noexp) searches the entire path.}
\CommentTok{NB.}
\CommentTok{NB. monad:  revonex zl | clPattern}
\CommentTok{NB.}
\CommentTok{NB.   revonex \textquotesingle{}\textquotesingle{}  NB. put dictionary words without short explanations}
\CommentTok{NB.}
\CommentTok{NB. dyad:  iaCode revonex zl|clPattern}
\CommentTok{NB.}
\CommentTok{NB.   2 revonex \textquotesingle{}jod\textquotesingle{}       NB. put dictionary groups without explanations}
\CommentTok{NB.   (i.5) revonex"0 1 \textquotesingle{}\textquotesingle{}  NB. all put dictionary objects without explanations}

\KeywordTok{/:\textasciitilde{}} \DecValTok{0}\NormalTok{ revonex }\KeywordTok{y}
\KeywordTok{:}
\KeywordTok{if.}\NormalTok{ badrc uv}\KeywordTok{=./:\textasciitilde{}} \KeywordTok{x}\NormalTok{ revo }\KeywordTok{y} \KeywordTok{do.}\NormalTok{ uv}
\KeywordTok{elseif.} \KeywordTok{a:} \KeywordTok{e.}\NormalTok{ uv  }\KeywordTok{do.}\NormalTok{ ok }\StringTok{\textquotesingle{}\textquotesingle{}}
\KeywordTok{elseif.}\NormalTok{ badrc uv}\KeywordTok{=.} \RegionMarkerTok{((}\KeywordTok{\{.x}\RegionMarkerTok{)}\KeywordTok{,}\NormalTok{EXPLAIN}\RegionMarkerTok{)}\NormalTok{ get }\KeywordTok{\}.}\NormalTok{uv }\KeywordTok{do.}\NormalTok{ uv}
\KeywordTok{elseif.} \DecValTok{0}\KeywordTok{=\#}\NormalTok{uv}\KeywordTok{=.}\NormalTok{ rv uv  }\KeywordTok{do.}\NormalTok{ ok }\StringTok{\textquotesingle{}\textquotesingle{}}
\KeywordTok{elseif.do.}
\NormalTok{ ok }\RegionMarkerTok{(}\DecValTok{0} \KeywordTok{=} \KeywordTok{\#\&>} \KeywordTok{\{:"}\DecValTok{1}\NormalTok{ uv}\RegionMarkerTok{)} \KeywordTok{\#} \KeywordTok{\{."}\DecValTok{1}\NormalTok{ uv}
\KeywordTok{end.}
\RegionMarkerTok{)}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{today}\AlertTok{=:}\index{today@\texttt{today}} \DecValTok{3} \RegionMarkerTok{: 0}

\CommentTok{NB.*today v{-}{-} returns todays date.}
\CommentTok{NB.}
\CommentTok{NB. monad:  ilYYYYMMDD =. today uu}
\CommentTok{NB.}
\CommentTok{NB.   today 0    NB. ignores argument}
\CommentTok{NB.}
\CommentTok{NB. dyad:  iaYYYYMMDD =. uu today uu}
\CommentTok{NB.}
\CommentTok{NB.   0 today 0}

\DecValTok{3}\KeywordTok{\&\{.@}\RegionMarkerTok{(}\DecValTok{6}\KeywordTok{!:}\DecValTok{0}\RegionMarkerTok{)} \StringTok{\textquotesingle{}\textquotesingle{}}
\KeywordTok{:}
\DecValTok{0} \DecValTok{100} \DecValTok{100} \KeywordTok{\#.} \KeywordTok{<.} \DecValTok{3}\KeywordTok{\&\{.@}\RegionMarkerTok{(}\DecValTok{6}\KeywordTok{!:}\DecValTok{0}\RegionMarkerTok{)} \StringTok{\textquotesingle{}\textquotesingle{}}
\RegionMarkerTok{)}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{todayno}\AlertTok{=:}\index{todayno@\texttt{todayno}} \DecValTok{3} \RegionMarkerTok{: 0}

\CommentTok{NB.*todayno v{-}{-} convert dates to day numbers, converse  (todate).}
\CommentTok{NB.}
\CommentTok{NB. WARNING: valid only for  Gregorian dates after  and including}
\CommentTok{NB. 1800 1 1.}
\CommentTok{NB.}
\CommentTok{NB. monad:  todayno ilYYYYMMDD}
\CommentTok{NB.}
\CommentTok{NB.   dates=. 19530702 19520820 20000101 20000229}
\CommentTok{NB.   todayno 0 100 100 \#: dates}
\CommentTok{NB.}
\CommentTok{NB. dyad:  pa todayno itYYYYMMDD}
\CommentTok{NB.}
\CommentTok{NB.   1 todayno dates}

\DecValTok{0}\NormalTok{ todayno }\KeywordTok{y}
\KeywordTok{:}
\NormalTok{a}\KeywordTok{=.} \KeywordTok{y}
\KeywordTok{if.} \KeywordTok{x} \KeywordTok{do.}\NormalTok{ a}\KeywordTok{=.} \DecValTok{0} \DecValTok{100} \DecValTok{100} \KeywordTok{\#:}\NormalTok{ a }\KeywordTok{end.}
\NormalTok{a}\KeywordTok{=.} \RegionMarkerTok{((}\KeywordTok{*/}\NormalTok{r}\KeywordTok{=.} \KeywordTok{\}:} \KeywordTok{$}\NormalTok{a}\RegionMarkerTok{)} \KeywordTok{,} \KeywordTok{\{:$}\NormalTok{a}\RegionMarkerTok{)} \KeywordTok{$,}\NormalTok{a}
\StringTok{\textquotesingle{}y m d\textquotesingle{}}\KeywordTok{=.} \KeywordTok{<"}\NormalTok{\_}\DecValTok{1} \KeywordTok{|:}\NormalTok{ a}
\KeywordTok{y=.} \DecValTok{0} \DecValTok{100} \KeywordTok{\#:} \KeywordTok{y} \KeywordTok{{-}} \KeywordTok{m} \KeywordTok{<:} \DecValTok{2}
\KeywordTok{n=.} \KeywordTok{+/} \KeywordTok{|:} \KeywordTok{<.} \DecValTok{36524.25} \DecValTok{365.25} \KeywordTok{*"}\DecValTok{1} \KeywordTok{y}
\KeywordTok{n=.} \KeywordTok{n} \KeywordTok{+} \KeywordTok{<.} \DecValTok{0.41} \KeywordTok{+} \DecValTok{0} \DecValTok{30.6} \KeywordTok{\#.} \RegionMarkerTok{(}\DecValTok{12} \KeywordTok{|} \KeywordTok{m{-}}\DecValTok{3}\RegionMarkerTok{)}\KeywordTok{,"}\DecValTok{0}\NormalTok{ d}
\DecValTok{0} \KeywordTok{>.}\NormalTok{ r }\KeywordTok{$} \KeywordTok{n} \KeywordTok{{-}} \DecValTok{657378}
\RegionMarkerTok{)}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{updatepublic}\AlertTok{=:}\index{updatepublic@\texttt{updatepublic}} \DecValTok{4} \RegionMarkerTok{: 0}

\CommentTok{NB.*updatepublic v{-}{-} updates public scripts table.}
\CommentTok{NB.}
\CommentTok{NB. dyad:  btcl =. btclPublic updatepublic blNamePath}
\CommentTok{NB.}
\CommentTok{NB.   Public\_j\_ updatepublic \textquotesingle{}name\textquotesingle{};\textquotesingle{}c:/where/the/script/things/are.ijs\textquotesingle{}}

\NormalTok{p}\KeywordTok{=.} \RegionMarkerTok{(}\DecValTok{0} \KeywordTok{\{"}\DecValTok{1} \KeywordTok{x}\RegionMarkerTok{)} \KeywordTok{i.} \DecValTok{0}\KeywordTok{\{y}
\KeywordTok{if.}\NormalTok{ p}\KeywordTok{<\#x} \KeywordTok{do.}
  \CommentTok{NB. update entry}
  \KeywordTok{x=.} \KeywordTok{y}\NormalTok{ p}\KeywordTok{\}} \KeywordTok{x}
\KeywordTok{else.}
  \CommentTok{NB. new entry {-} sort public scripts}
  \KeywordTok{x=.} \KeywordTok{x} \KeywordTok{,} \KeywordTok{y}
  \KeywordTok{x=.} \RegionMarkerTok{(}\KeywordTok{/:}\DecValTok{0} \KeywordTok{\{"}\DecValTok{1} \KeywordTok{x}\RegionMarkerTok{)}\KeywordTok{\{x}
\KeywordTok{end.}
\RegionMarkerTok{)}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{usedby}\AlertTok{=:}\index{usedby@\texttt{usedby}} \DecValTok{4} \RegionMarkerTok{: 0}

\CommentTok{NB.*usedby  v{-}{-}  returns  a list of words from (y)  that DIRECTLY}
\CommentTok{NB. call  words  on  (x). The  result of this verb depends on JOD}
\CommentTok{NB. dictionary references being up{-}to{-}date.}
\CommentTok{NB.}
\CommentTok{NB. dyad:  cl|blcl usedby blcl}
\CommentTok{NB.}
\CommentTok{NB.   \textquotesingle{}wordname\textquotesingle{} usedby \}. dnl \textquotesingle{}\textquotesingle{}}
\CommentTok{NB.   (\textquotesingle{}word\textquotesingle{};\textquotesingle{}names\textquotesingle{}) usedby \}. revo \textquotesingle{}\textquotesingle{}}
\CommentTok{NB.}
\CommentTok{NB.   \textquotesingle{}putgs\_\_ST\textquotesingle{} usedby \}. dnl \textquotesingle{}\textquotesingle{}}

\CommentTok{NB. (uses) is expensive for large word lists.}
\KeywordTok{if.}\NormalTok{ badrc uv}\KeywordTok{=.}\NormalTok{uses }\KeywordTok{y} \KeywordTok{do.}\NormalTok{ uv}
\KeywordTok{else.}
\NormalTok{  uv}\KeywordTok{=.} \KeywordTok{>\{:}\NormalTok{ uv}
\NormalTok{  names}\KeywordTok{=.}\NormalTok{ boxopen }\KeywordTok{x}
  \CommentTok{NB. search object and locale references if \_ occurs in any name}
\NormalTok{  col}\KeywordTok{=.} \KeywordTok{>:} \KeywordTok{+./} \StringTok{\textquotesingle{}\_\textquotesingle{}}\KeywordTok{\&e.\&>}\NormalTok{ names}
\NormalTok{  ok }\KeywordTok{/:\textasciitilde{}} \RegionMarkerTok{(}\KeywordTok{\{."}\DecValTok{1}\NormalTok{ uv}\RegionMarkerTok{)} \KeywordTok{\#\textasciitilde{}}  \KeywordTok{;} \RegionMarkerTok{(}\NormalTok{col }\KeywordTok{\{"}\DecValTok{1}\NormalTok{ uv}\RegionMarkerTok{)} \KeywordTok{+./@e.\&.>} \KeywordTok{<}\NormalTok{ names}
\KeywordTok{end.}
\RegionMarkerTok{)}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{yyyymondd}\AlertTok{=:}\index{yyyymondd@\texttt{yyyymondd}} \DecValTok{3} \RegionMarkerTok{: 0}

\CommentTok{NB.*yyyymondd v{-}{-} today in (yyyymondd;hrmnss) format.}
\CommentTok{NB.}
\CommentTok{NB. Yet another date format verb. We can never have enough!}
\CommentTok{NB.}
\CommentTok{NB. monad:  (clDate ; clTime) =. yyyymondd uuIgnore}

\NormalTok{fmt}\KeywordTok{=.}\StringTok{\textquotesingle{}r<0>2.0\textquotesingle{}}
\NormalTok{months}\KeywordTok{=.} \DecValTok{\_3} \KeywordTok{[\textbackslash{}} \StringTok{\textquotesingle{}   janfebmaraprmayjunjulaugsepoctnovdec\textquotesingle{}}
\StringTok{\textquotesingle{}yy mn dd\textquotesingle{}}\KeywordTok{=.} \DecValTok{3}\KeywordTok{\{.}\NormalTok{now}\KeywordTok{=.} \DecValTok{6}\KeywordTok{!:}\DecValTok{0}\StringTok{\textquotesingle{}\textquotesingle{}}
\NormalTok{date}\KeywordTok{=.} \RegionMarkerTok{(}\KeywordTok{":}\NormalTok{yy}\RegionMarkerTok{)}\KeywordTok{,}\RegionMarkerTok{(}\NormalTok{mn}\KeywordTok{\{}\NormalTok{months}\RegionMarkerTok{)}\KeywordTok{,,}\NormalTok{fmt }\RegionMarkerTok{(}\DecValTok{8}\KeywordTok{!:}\DecValTok{2}\RegionMarkerTok{)}\NormalTok{ dd}
\NormalTok{time}\KeywordTok{=.} \KeywordTok{\}.;}\StringTok{\textquotesingle{}:\textquotesingle{}} \KeywordTok{,\&.>}\NormalTok{ fmt }\RegionMarkerTok{(}\DecValTok{8}\KeywordTok{!:}\DecValTok{0}\RegionMarkerTok{)} \DecValTok{\_3} \KeywordTok{\{.}\NormalTok{ now}
\NormalTok{date}\KeywordTok{;}\NormalTok{time}
\RegionMarkerTok{)}
\end{Highlighting}
\end{Shaded}
\begin{JODPostProcessor}
\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{NB.*jodtools s{-}{-} jodtools postprocessor.}

\CommentTok{NB. retain whitespace}
\RegionMarkerTok{(}\DecValTok{9}\KeywordTok{!:}\DecValTok{41}\RegionMarkerTok{)} \DecValTok{1}

\CommentTok{NB. insure base}
\NormalTok{cocurrent }\StringTok{\textquotesingle{}base\textquotesingle{}}

\CommentTok{NB. create/initialize a JOD tools object}
\NormalTok{JODtools\_ijod}\DecValTok{\_}\AlertTok{=:}\index{JODtools\_ijod\_@\texttt{JODtools\_ijod\_}}\NormalTok{  conew }\StringTok{\textquotesingle{}ajodtools\textquotesingle{}}                 \CommentTok{NB. new tools object}
\RegionMarkerTok{(}\DecValTok{1}\KeywordTok{!:}\DecValTok{2}\KeywordTok{\&}\DecValTok{2}\RegionMarkerTok{)}\NormalTok{ createjodtools}\DecValTok{\_\_}\NormalTok{JODtools JODtools}\KeywordTok{,}\NormalTok{JODobj  }\CommentTok{NB. pass self and JODs}
\end{Highlighting}
\end{Shaded}
\end{JODPostProcessor}
